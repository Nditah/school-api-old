{"version":3,"sources":["../../../../src/api/general/staff/routes.js"],"names":["express","checkAuth","isValidStaff","fetchRecord","createRecord","updateRecord","deleteRecord","login","router","Router","get","post","put","delete"],"mappings":"AAAA,OAAOA,OAAP,MAAoB,SAApB;AACA,SAASC,SAAT,EAAoBC,YAApB,QAAwC,mCAAxC;AACA,SAASC,WAAT,EAAsBC,YAAtB,EAAoCC,YAApC,EAAkDC,YAAlD,EAAgEC,KAAhE,QAA6E,cAA7E;;AAEA,MAAMC,SAASR,QAAQS,MAAR,EAAf;;AAEA;;;;;;;;;;;;;;;;AAgBAD,OAAOE,GAAP,CAAW,QAAX,EAAqB,CAACT,SAAD,EAAYC,YAAZ,CAArB,EAAgDC,WAAhD;;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6EAK,OAAOG,IAAP,CAAY,QAAZ,EAAsB,CAACV,SAAD,EAAYC,YAAZ,CAAtB,EAAiDE,YAAjD;;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+EAI,OAAOI,GAAP,CAAW,kBAAX,EAA+B,CAACX,SAAD,EAAYC,YAAZ,CAA/B,EAA0DG,YAA1D;;AAEA;;;;;;;;;;AAUAG,OAAOK,MAAP,CAAc,kBAAd,EAAkC,CAACZ,SAAD,EAAYC,YAAZ,CAAlC,EAA6DI,YAA7D;;AAEA;;;;;;;;;;;;;AAaAE,OAAOG,IAAP,CAAY,cAAZ,EAA4BJ,KAA5B;;AAEA,eAAeC,MAAf","file":"routes.js","sourcesContent":["import express from \"express\";\nimport { checkAuth, isValidStaff } from \"../../../middleware/authorization\";\nimport { fetchRecord, createRecord, updateRecord, deleteRecord, login } from \"./controller\";\n\nconst router = express.Router();\n\n/**\n * @api {get} /api/staff?id={recordId} Retrieve Staff records\n * @apiName RetrieveStaff\n * @apiGroup Staff\n * @apiHeader {String} Authorization Bearer token\n * @apiExample {curl} Example usage for retieving a single record:\n *      curl -i api/staff?\n * @apiParam {Object} filter query condition (optional)\n * @apiParam {Number} skip Number of records to offset by (optional)\n * @apiParam {Number} limit Maximum Number of records to retrieve (optional)\n * @apiParam {String} sort how records would be arranged in alphabet (optional)\n * @apiParam {String} projection list of record's attributes to retrieve (optional)\n * @apiDescription Records of staff distributed across terminals.\n * @apiSuccess {Object[]} Array of Objects of records.\n * @apiError {Object} 400 Some parameters may contain invalid values.\n */\nrouter.get(\"/staff\", [checkAuth, isValidStaff], fetchRecord);\n\n/**\n * @api {post} /api/staff Create a Staff record\n * @apiName CreateStaff\n * @apiGroup Staff\n * @apiHeader {String} Authorization Bearer token\n * @apiParam {String} serial Staff serial (optional)\n * @apiParam {String} category Staff category (optional)\n * @apiParam {String} title Staff title (optional)\n * @apiParam {String} surname Staff surname (required)\n * @apiParam {String} other_name Staff other_name (required)\n * @apiParam {String} gender Staff gender (required)\n * @apiParam {Date} birth_date Staff birth_date (required)\n * @apiParam {String} marital_status Staff marital_status (required)\n * @apiParam {Number} children Staff Number of children (optional)\n * @apiParam {String} phone_office Staff phone_office (optional)\n * @apiParam {String} phone_personal Staff phone_personal (optional)\n * @apiParam {String} address Staff address (optional)\n * @apiParam {String} village Staff village (optional)\n * @apiParam {String} state_id Staff state_id (required)\n * @apiParam {String} county_id Staff county_id (required)\n * @apiParam {String} country_iso2 Staff country_iso2 (optional)\n * @apiParam {String} email Staff email (optional)\n * @apiParam {String} password Staff password (optional)\n * @apiParam {String} otp Staff otp (optional)\n * @apiParam {Number} otp_count Staff otp_count (optional)\n * @apiParam {String} kin Staff kin (required)\n * @apiParam {String} kin_phone Staff kin_phone (required)\n * @apiParam {String} kin_address Staff kin_address (required)\n * @apiParam {String} guarantor1 Staff guarantor1 (required)\n * @apiParam {String} guarantor1_phone Staff guarantor1_phone (required)\n * @apiParam {String} guarantor1_address Staff guarantor1_address (required)\n * @apiParam {String} guarantor2 Staff guarantor2 (optional)\n * @apiParam {String} guarantor2_phone Staff guarantor2_phone (optional)\n * @apiParam {String} guarantor2_address Staff guarantor2_address (optional)\n * @apiParam {String} profession Staff profession (optional)\n * @apiParam {String} qualification Staff qualification (optional)\n * @apiParam {String} institution Staff institution (optional)\n * @apiParam {String} employment_status Staff employment_status (required)\n * @apiParam {Number} tax Staff tax (optional)\n * @apiParam {Number} basic_salary Staff basic_salary (optional)\n * @apiParam {Number} bonus Staff bonus (optional)\n * @apiParam {Number} entertainment_allowance Staff entertainment_allowance (optional)\n * @apiParam {Number} house_allowance Staff house_allowance (optional)\n * @apiParam {Number} lunch_allowance Staff lunch_allowance (optional)\n * @apiParam {Number} medical_allowance Staff medical_allowance (optional)\n * @apiParam {Number} transport_allowance Staff transport_allowance (optional)\n * @apiParam {Number} utility_allowance Staff utility_allowance (optional)\n * @apiParam {Number} welfare_allowance Staff welfare_allowance (optional)\n * @apiParam {Number} pension Staff pension (optional)\n * @apiParam {Number} assurance Staff assurance (optional)\n * @apiParam {String} bank_id Staff bank_id (optional)\n * @apiParam {String} bank_account_number Staff bank_account_number (optional)\n * @apiParam {String} bank_account_name Staff bank_account_name (optional)\n * @apiParam {String} rank Staff rank (optional)\n * @apiParam {String} office_id Staff office_id (required)\n * @apiParam {String} superior_id Staff superior_id (required)\n * @apiParam {String} subsidiary Staff subsidiary (required)\n * @apiParam {String} terminal_id Staff terminal_id (required)\n * @apiParam {Array} asset_request_assigment_ids array of Objects of Asset Assigmnet History\n * managed my Asset Manager (prohibited)\n * @apiParam {String} vehicle_id Staff vehicle_id (optional)\n * @apiParam {String} notice Staff notice (optional)\n * @apiParam {Number} rating_ids Staff rating_ids (optional)\n * @apiParam {String} remark Staff remark (optional)\n * @apiParam {String} photo Staff photo (optional)\n * @apiParam {Boolean} is_salary_payable Staff is_salary_payable (optional)\n * @apiParam {Boolean} is_document_complete Staff is_document_complete (optional)\n * @apiParam {Number} access_level Staff access_level (optional)\n * @apiParam {String} approved_by Staff approved_by (optional)\n * @apiParam {Date} approved_date Staff approved_date (optional)\n * @apiParam {String} disengaged_by Staff disengaged_by (optional)\n * @apiParam {Date} disengaged_date Staff disengaged_date (optional)\n * @apiSuccess {Object} Staff Staff's data.\n * @apiError {Object} 400 Some parameters may contain invalid values.\n * @apiError 404 Staff not found.\n * @apiError 401 master access only.\n */\nrouter.post(\"/staff\", [checkAuth, isValidStaff], createRecord);\n\n/**\n * @api {put} /api/staff/{recordId} Update a Staff record\n * @apiName UpdateStaff\n * @apiGroup Staff\n * @apiHeader {String} Authorization Bearer token\n * @apiParam {String} recordId required record ObjectId\n * @apiParam {String} serial Staff serial (optional)\n * @apiParam {String} category Staff category (optional)\n * @apiParam {String} title Staff title (optional)\n * @apiParam {String} surname Staff surname (required)\n * @apiParam {String} other_name Staff other_name (required)\n * @apiParam {String} gender Staff gender (required)\n * @apiParam {Date} birth_date Staff birth_date (required)\n * @apiParam {String} marital_status Staff marital_status (required)\n * @apiParam {Number} children Staff Number of children (optional)\n * @apiParam {String} phone Staff office phone (required)\n * @apiParam {String} phone_personal Staff phone_personal (optional)\n * @apiParam {String} address Staff address (optional)\n * @apiParam {String} village Staff village (optional)\n * @apiParam {String} state_id Staff state_id (required)\n * @apiParam {String} county_id Staff county_id (required)\n * @apiParam {String} country_iso2 Staff country_iso2 (optional)\n * @apiParam {String} email Staff email (optional)\n * @apiParam {String} password Staff password (optional)\n * @apiParam {String} otp Staff otp (optional)\n * @apiParam {Number} otp_count Staff otp_count (optional)\n * @apiParam {String} kin Staff kin (required)\n * @apiParam {String} kin_phone Staff kin_phone (required)\n * @apiParam {String} kin_address Staff kin_address (required)\n * @apiParam {String} guarantor1 Staff guarantor1 (required)\n * @apiParam {String} guarantor1_phone Staff guarantor1_phone (required)\n * @apiParam {String} guarantor1_address Staff guarantor1_address (required)\n * @apiParam {String} guarantor2 Staff guarantor2 (optional)\n * @apiParam {String} guarantor2_phone Staff guarantor2_phone (optional)\n * @apiParam {String} guarantor2_address Staff guarantor2_address (optional)\n * @apiParam {String} profession Staff profession (optional)\n * @apiParam {String} qualification Staff qualification (optional)\n * @apiParam {String} institution Staff institution (optional)\n * @apiParam {String} employment_status Staff employment_status (required)\n * @apiParam {Number} tax Staff tax (optional)\n * @apiParam {Number} basic_salary Staff basic_salary (optional)\n * @apiParam {Number} bonus Staff bonus (optional)\n * @apiParam {Number} entertainment_allowance Staff entertainment_allowance (optional)\n * @apiParam {Number} house_allowance Staff house_allowance (optional)\n * @apiParam {Number} lunch_allowance Staff lunch_allowance (optional)\n * @apiParam {Number} medical_allowance Staff medical_allowance (optional)\n * @apiParam {Number} transport_allowance Staff transport_allowance (optional)\n * @apiParam {Number} utility_allowance Staff utility_allowance (optional)\n * @apiParam {Number} welfare_allowance Staff welfare_allowance (optional)\n * @apiParam {Number} pension Staff pension (optional)\n * @apiParam {Number} assurance Staff assurance (optional)\n * @apiParam {String} bank_id Staff bank_id (optional)\n * @apiParam {String} bank_account_number Staff bank_account_number (optional)\n * @apiParam {String} bank_account_name Staff bank_account_name (optional)\n * @apiParam {String} rank Staff rank (optional)\n * @apiParam {String} office_id Staff office_id (required)\n * @apiParam {Array} role Staff role is an array of office duties (required)\n * @apiParam {String} superior_id Staff superior_id (required)\n * @apiParam {String} subsidiary Staff subsidiary (required)\n * @apiParam {String} terminal_id Staff terminal_id (required)\n * @apiParam {String} vehicle_id Staff vehicle_id (optional)\n * @apiParam {Array} asset_request_assigment_ids array of Objects of Asset Assigmnet History\n * managed my Asset Manager (prohibited)\n * @apiParam {String} notice Staff notice (optional)\n * @apiParam {Array} rating_ids Staff rating_ids (optional)\n * @apiParam {String} remark Staff remark (optional)\n * @apiParam {String} photo Staff photo (optional)\n * @apiParam {Boolean} is_salary_payable Staff is_salary_payable (optional)\n * @apiParam {Boolean} is_document_complete Staff is_document_complete (optional)\n * @apiParam {Number} access_level Staff access_level (optional)\n * @apiParam {String} approved_by Staff approved_by (optional)\n * @apiParam {Date} approved_date Staff approved_date (optional)\n * @apiParam {String} disengaged_by Staff disengaged_by (optional)\n * @apiParam {Date} disengaged_date Staff disengaged_date (optional)\n * @apiSuccess {Object} Staff Staff's data.\n * @apiError {Object} 400 Some parameters may contain invalid values.\n * @apiError 404 Staff not found.\n * @apiError 401 master access only.\n */\nrouter.put(\"/staff/:recordId\", [checkAuth, isValidStaff], updateRecord);\n\n/**\n * @api {delete} /api/staff/{recordId} Delete a Staff record\n * @apiName DeleteStaff\n * @apiGroup Staff\n * @apiHeader {String} Authorization Bearer token\n * @apiParam {String} recordId required record ObjectId\n * @apiSuccess (Success 204) 204 No Content.\n * @apiError 404 Staff not found.\n * @apiError 401 master access only.\n */\nrouter.delete(\"/staff/:recordId\", [checkAuth, isValidStaff], deleteRecord);\n\n/**\n * @api {post} /api/staff/login Login Staff\n * @apiName LoginStaff\n * @apiGroup Staff\n * @apiPermission master\n * @apiParam {String} email Staff email address (optional)\n * @apiParam {String} password Staff password (optional)\n * @apiParam {String} office_phone Staff official phone number (optional)\n * @apiParam {String} otp Staff One-Time-Password sent to phone (optional)\n * @apiParam {String} type Login type \"EMAIL\", \"PHONE\", \"OTP\" (required)\n * @apiSuccess (Success 200) 200 Login Successful.\n * @apiError 404 Staff not found.\n */\nrouter.post(\"/staff/login\", login);\n\nexport default router;\n"]}