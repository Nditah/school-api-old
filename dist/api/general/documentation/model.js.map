{"version":3,"sources":["../../../../src/api/general/documentation/model.js"],"names":["Joi","mongoose","mongoose_csv","DATABASE","table","Staff","Vehicle","DocumentType","Schema","ObjectId","Types","schemaCreate","document_type_id","string","optional","type","trim","valid","required","asset_id","staff_id","partner_id","customer_id","vehicle_id","sales_order_id","purchase_order_id","reference","last_renewal","date","next_renewal","renewal_by","amount","number","description","is_renewed","boolean","is_validity","created_by","schemaUpdate","updated_by","schema","ref","String","enum","Date","Number","comment","Boolean","default","url","validate","validator","text","length","indexOf","message","preload","PRELOAD_TABLE_DATA","DEFAULT","options","OPTIONS","newSchema","set","plugin","Documentation","model","insertMany"],"mappings":"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","file":"model.js","sourcesContent":["/**\n * @author 4Dcoder\n * @property {ObjectId} id Documentation primaryKey\n * @property {ObjectId} document_type_id Documentation DocumentType ObjectId (required)\n * @property {String} type Documentation type owner\n * \"ASSET|PARTNER|STAFF|VEHICLE|SALESORDER|PURCHASE\" (required)\n * @property {ObjectId} asset_id Documentation asset ObjectId\n * @property {ObjectId} staff_id Documentation staff ObjectId\n * @property {ObjectId} partner_id Documentation partner ObjectId\n * @property {ObjectId} customer_id Documentation customer ObjectId\n * @property {ObjectId} vehicle_id Documentation vehicle ObjectId\n * @property {ObjectId} sales_order_id Documentation sales_order ObjectId\n * @property {ObjectId} purchase_order_id Documentation PurchaseOrder ObjectId\n * @property {String} reference Documentation reference number\n * @property {Date} last_renewal Documentation previous date renewal\n * @property {Date} next_renewal Documentation upcoming renewal\n * @property {ObjectId} renewal_by Documentation renewal_by Staff responsible for the task\n * @property {Number} amount Documentation amount spent or fee|charge for renewal\n * @property {String} description Documentation description\n * @property {Boolean} is_renewed Documentation is_renewed\n * @property {Boolean} is_validity Documentation is_validity\n * @description Documentation model holds all Company documents\n */\nimport Joi from \"joi\";\nimport mongoose from \"mongoose\";\n// eslint-disable-next-line camelcase\nimport mongoose_csv from \"mongoose-csv\";\nimport { DATABASE } from \"../../../constants\";\nimport table from \"./table\";\nimport Staff from \"../staff/model\";\nimport Vehicle from \"../vehicle/model\";\nimport DocumentType from \"../document-type/model\";\n\nconst { Schema } = mongoose;\nconst { ObjectId } = Schema.Types;\n\nexport const schemaCreate = {\n    document_type_id: Joi.string().optional(),\n    type: Joi.string().trim().valid([\"ASSET\", \"PARTNER\", \"STAFF\", \"VEHICLE\", \"SALESORDER\", \"PURCHASE\"]).required(),\n    asset_id: Joi.string().optional(),\n    staff_id: Joi.string().optional(),\n    partner_id: Joi.string().optional(),\n    customer_id: Joi.string().optional(),\n    vehicle_id: Joi.string().optional(),\n    sales_order_id: Joi.string().optional(),\n    purchase_order_id: Joi.string().optional(),\n    reference: Joi.string().optional(),\n    last_renewal: Joi.date().optional(),\n    next_renewal: Joi.date().optional(),\n    renewal_by: Joi.string().optional(),\n    amount: Joi.number().optional(),\n    description: Joi.string().optional(),\n    is_renewed: Joi.boolean().optional(),\n    is_validity: Joi.boolean().optional(),\n    created_by: Joi.string().required(),\n};\n\nexport const schemaUpdate = {\n    document_type_id: Joi.string().optional(),\n    type: Joi.string().trim().valid([\"ASSET\", \"PARTNER\", \"STAFF\", \"VEHICLE\", \"SALESORDER\", \"PURCHASE\"]).required(),\n    asset_id: Joi.string().optional(),\n    staff_id: Joi.string().optional(),\n    partner_id: Joi.string().optional(),\n    customer_id: Joi.string().optional(),\n    vehicle_id: Joi.string().optional(),\n    sales_order_id: Joi.string().optional(),\n    purchase_order_id: Joi.string().optional(),\n    reference: Joi.string().optional(),\n    last_renewal: Joi.date().optional(),\n    next_renewal: Joi.date().optional(),\n    renewal_by: Joi.string().optional(),\n    amount: Joi.number().optional(),\n    description: Joi.string().optional(),\n    is_renewed: Joi.boolean().optional(),\n    is_validity: Joi.boolean().optional(),\n    updated_by: Joi.string().required(),\n};\n\nexport const schema = {\n    document_type_id: { type: ObjectId, ref: \"DocumentType\", required: true },\n    type: {\n        type: String,\n        enum: [\"ASSET\", \"PARTNER\", \"STAFF\", \"VEHICLE\", \"SALESORDER\", \"PURCHASE\"],\n        required: true,\n    },\n    asset_id: { type: ObjectId, ref: \"Asset\" },\n    staff_id: { type: ObjectId, ref: \"Staff\" },\n    partner_id: { type: ObjectId, ref: \"Partner\" },\n    customer_id: { type: ObjectId, ref: \"Customer\" },\n    vehicle_id: { type: ObjectId, ref: \"Vehicle\" },\n    sales_order_id: { type: ObjectId, ref: \"SalesOrder\" },\n    purchase_order_id: { type: ObjectId, ref: \"PurchaseOrder\" },\n    reference: { type: String },\n    last_renewal: { type: Date },\n    next_renewal: { type: Date },\n    renewal_by: { type: ObjectId, ref: \"Staff\" },\n    amount: { type: Number, comment: \"fee or renewal charge\" },\n    description: { type: String },\n    is_renewed: { type: Boolean, required: true, default: false },\n    is_validity: { type: Boolean, required: true, default: false },\n    url: {\n        type: String,\n        validate: {\n            validator(text) {\n                if (text !== null && text.length > 0) {\n                    return text.indexOf(\"https://\") === 0 || text.indexOf(\"http://\") === 0;\n                }\n                return true;\n            },\n            message: \"Image url must start with https://uniform-resource/locator/images\",\n        },\n    },\n    created_by: { type: ObjectId, ref: \"Staff\", required: true },\n    updated_by: { type: ObjectId, ref: \"Staff\" },\n};\nconst preload = DATABASE.PRELOAD_TABLE_DATA.DEFAULT;\nconst options = DATABASE.OPTIONS;\n\nconst newSchema = new Schema(schema, options);\nnewSchema.set(\"collection\", \"documentation\");\nnewSchema.plugin(mongoose_csv);\n\nconst Documentation = mongoose.model(\"Documentation\", newSchema);\n\nif (preload) { Documentation.insertMany(table); }\n\nexport default Documentation;\n"]}