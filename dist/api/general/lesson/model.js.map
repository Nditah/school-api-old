{"version":3,"sources":["../../../../src/api/general/lesson/model.js"],"names":["Schema","mongoose","ObjectId","Types","schemaCreate","title","Joi","string","optional","duration","date","objective","number","unit","teacher","description","course","created_by","required","schemaUpdate","updated_by","schema","type","String","unique","Date","Number","ref","preload","DATABASE","PRELOAD_TABLE_DATA","DEFAULT","options","OPTIONS","newSchema","set","plugin","mongoose_csv","Lesson","model","insertMany","table"],"mappings":";;;;;;;AAaA;;;;AACA;;;;AAEA;;;;AACA;;AACA;;;;AACA;;;;AACA;;;;;;IAEQA,M,GAAWC,kB,CAAXD,M;AAPR;AAfA;AACA;;;;;;;;;;;;;IAsBQE,Q,GAAaF,OAAOG,K,CAApBD,Q;AAED,IAAME,sCAAe;AACxBC,WAAOC,cAAIC,MAAJ,GAAaC,QAAb,EADiB;AAExBC,cAAUH,cAAII,IAAJ,GAAWF,QAAX,EAFc;AAGxBG,eAAWL,cAAIM,MAAJ,GAAaJ,QAAb,EAHa;AAIxBK,UAAMP,cAAIM,MAAJ,GAAaJ,QAAb,EAJkB;AAKxBM,aAAUR,cAAIC,MAAJ,GAAaC,QAAb,EALc;AAMxBO,iBAAaT,cAAIC,MAAJ,GAAaC,QAAb,EANW;AAOxBQ,YAAQV,cAAIC,MAAJ,GAAaC,QAAb,EAPgB;AAQxBS,gBAAYX,cAAIC,MAAJ,GAAaW,QAAb;AARY,CAArB;;AAWA,IAAMC,sCAAe;AACxBd,WAAOC,cAAIC,MAAJ,GAAaC,QAAb,EADiB;AAExBC,cAAUH,cAAII,IAAJ,GAAWF,QAAX,EAFc;AAGxBG,eAAWL,cAAIM,MAAJ,GAAaJ,QAAb,EAHa;AAIxBK,UAAMP,cAAIM,MAAJ,GAAaJ,QAAb,EAJkB;AAKxBM,aAAUR,cAAIC,MAAJ,GAAaC,QAAb,EALc;AAMxBO,iBAAaT,cAAIC,MAAJ,GAAaC,QAAb,EANW;AAOxBQ,YAAQV,cAAIC,MAAJ,GAAaC,QAAb,EAPgB;AAQxBY,gBAAYd,cAAIC,MAAJ,GAAaW,QAAb;AARY,CAArB;;AAWA,IAAMG,0BAAS;AAClBhB,WAAO,EAAEiB,MAAMC,MAAR,EAAgBL,UAAU,CAAC,IAAD,EAAO,eAAP,CAA1B,EAAmDM,QAAQ,IAA3D,EADW;AAElBf,cAAU,EAAEa,MAAMG,IAAR,EAFQ;AAGlBd,eAAW,EAAEW,MAAMI,MAAR,EAHO;AAIlBb,UAAM,EAAES,MAAMI,MAAR,EAJY;AAKlBZ,aAAU,EAAEQ,MAAMpB,QAAR,EAAkByB,KAAK,OAAvB,EALQ;AAMlBZ,iBAAa,EAAEO,MAAMC,MAAR,EANK;AAOlBP,YAAQ,EAAEM,MAAMC,MAAR,EAAgBI,KAAM,QAAtB,EAPU;AAQlBV,gBAAY,EAAEK,MAAMpB,QAAR,EAAkBgB,UAAU,IAA5B,EAAkCS,KAAK,OAAvC,EARM;AASlBP,gBAAY,EAAEE,MAAMpB,QAAR,EAAkByB,KAAK,OAAvB;AATM,CAAf;;AAYP,IAAMC,UAAUC,oBAASC,kBAAT,CAA4BC,OAA5C;AACA,IAAMC,UAAUH,oBAASI,OAAzB;;AAEA,IAAMC,YAAY,IAAIlC,MAAJ,CAAWqB,MAAX,EAAmBW,OAAnB,CAAlB;AACAE,UAAUC,GAAV,CAAc,YAAd,EAA4B,QAA5B;AACAD,UAAUE,MAAV,CAAiBC,qBAAjB;;AAEA,IAAMC,SAASrC,mBAASsC,KAAT,CAAe,QAAf,EAAyBL,SAAzB,CAAf;AACA,IAAIN,OAAJ,EAAa;AAAEU,WAAOE,UAAP,CAAkBC,eAAlB;AAA2B;;kBAE3BH,M","file":"model.js","sourcesContent":["/* eslint-disable import/no-cycle */\n/**\n * @author 4Dcoder\n * @property {Number} id lesson primaryKey\n * @property {String} title Lesson title (required)\n * @property {Date} duration Lesson time duration (required)\n * @property {String} objective Lesson objective (required)\n * @property {Number} unit Lesson unit (required)\n * @property {ObjectId} teacher Lesson teacher (optional)\n * @property {String} description Lesson description (optional)\n * @property {ObjectId} course Lesson Course (optional)\n * @description Lesson model holds record of all lessons the company deals with\n */\nimport Joi from \"joi\";\nimport mongoose from \"mongoose\";\n// eslint-disable-next-line camelcase\nimport mongoose_csv from \"mongoose-csv\";\nimport { DATABASE } from \"../../../constants\";\nimport table from \"./table\";\nimport Staff from \"../staff/model\";\nimport Course from \"../course/model\";\n\nconst { Schema } = mongoose;\nconst { ObjectId } = Schema.Types;\n\nexport const schemaCreate = {\n    title: Joi.string().optional(),\n    duration: Joi.date().optional(),\n    objective: Joi.number().optional(),\n    unit: Joi.number().optional(),\n    teacher : Joi.string().optional(),\n    description: Joi.string().optional(),\n    course: Joi.string().optional(),\n    created_by: Joi.string().required(),\n};\n\nexport const schemaUpdate = {\n    title: Joi.string().optional(),\n    duration: Joi.date().optional(),\n    objective: Joi.number().optional(),\n    unit: Joi.number().optional(),\n    teacher : Joi.string().optional(),\n    description: Joi.string().optional(),\n    course: Joi.string().optional(),\n    updated_by: Joi.string().required(),\n};\n\nexport const schema = {\n    title: { type: String, required: [true, \"Why no input?\"], unique: true },\n    duration: { type: Date },\n    objective: { type: Number },\n    unit: { type: Number },\n    teacher : { type: ObjectId, ref: \"Staff\"},\n    description: { type: String },\n    course: { type: String, ref : \"Course\" },\n    created_by: { type: ObjectId, required: true, ref: \"Staff\" },\n    updated_by: { type: ObjectId, ref: \"Staff\" },\n};\n\nconst preload = DATABASE.PRELOAD_TABLE_DATA.DEFAULT;\nconst options = DATABASE.OPTIONS;\n\nconst newSchema = new Schema(schema, options);\nnewSchema.set(\"collection\", \"lesson\");\nnewSchema.plugin(mongoose_csv);\n\nconst Lesson = mongoose.model(\"Lesson\", newSchema);\nif (preload) { Lesson.insertMany(table); }\n\nexport default Lesson;\n"]}