{"version":3,"sources":["../../../../src/api/general/lesson/model.js"],"names":["Schema","mongoose","ObjectId","Types","curriculumCreate","code","Joi","string","required","title","description","duration","number","term","trim","valid","Object","values","TERM","level","LEVEL","subsidiary","SUBSIDIARY","course","optional","classes","array","subject","books","materials","created_by","curriculumUpdate","updated_by","curriculumSchema","type","String","enum","Number","comment","ref","options","DATABASE","OPTIONS","newCurriculumSchema","set","plugin","mongoose_csv","Curriculum","model","lessonCreate","date","start_date","end_date","objective","module","unit","teacher","timetable","classe","curriculum","remark","status","lessonUpdate","lessonSchema","unique","Date","deleted","Boolean","default","deleted_at","newLessonSchema","Lesson"],"mappings":"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","file":"model.js","sourcesContent":["/**\n * @author 4Dcoder\n * @property {ObjectId} id Curriculum primaryKey\n * @property {String} code Curriculum code (required)\n * @property {String} title Curriculum title (required)\n * @property {String} description Curriculum description (required)\n * @property {Number} duration Curriculum duration (required)\n * @property {String} term Curriculum term (required)\n * @property {Number} level Curriculum level (required)\n * @property {String} subsidiary Curriculum subsidiary (required)\n * @property {ObjectId} course Curriculum course\n * @property {ObjectId} classes Curriculum classes Array<ObjectId>\n * @property {ObjectId} subject Curriculum subject (required)\n * @property {Array} books Curriculum books Array<ObjectId>\n * @property {Array} materials Curriculum materials Array<ObjectId>\n * @property {ObjectId} staff Curriculum staff ObjectId\n * @property {ObjectId} book Curriculum Book ObjectId\n * @description Curriculum records the scheme-of-work for the academic year\n * for all classes and all subjects\n */\nimport Joi from \"joi\";\nimport mongoose from \"mongoose\";\n// eslint-disable-next-line camelcase\nimport mongoose_csv from \"mongoose-csv\";\nimport { DATABASE, SUBSIDIARY, LEVEL, TERM } from \"../../../constants\";\nimport Staff from \"../staff/model\";\nimport Book from \"../book/model\";\nimport Material from \"../material/model\";\nimport { Course, Subject } from \"../subject/model\";\n\nconst { Schema } = mongoose;\nconst { ObjectId } = Schema.Types;\n\nexport const curriculumCreate = {\n    code: Joi.string().required(),\n    title: Joi.string().required(),\n    description: Joi.string().required(),\n    duration: Joi.number().required(),\n    term: Joi.string().trim().valid(Object.values(TERM)).required(),\n    level: Joi.number().valid(Object.values(LEVEL)).required(),\n    subsidiary: Joi.string().trim().valid(Object.values(SUBSIDIARY)).required(),\n    course: Joi.string().optional(),\n    classes: Joi.array().optional(),\n    subject: Joi.string().required(),\n    books: Joi.array().optional(),\n    materials: Joi.array().optional(),\n    created_by: Joi.string().required(),\n};\n\nexport const curriculumUpdate = {\n    code: Joi.string().optional(),\n    title: Joi.string().optional(),\n    description: Joi.string().optional(),\n    duration: Joi.number().optional(),\n    term: Joi.string().trim().valid(Object.values(TERM)).optional(),\n    level: Joi.number().valid(Object.values(LEVEL)).optional(),\n    subsidiary: Joi.string().trim().valid(Object.values(SUBSIDIARY)).optional(),\n    course: Joi.string().optional(),\n    classes: Joi.array().optional(),\n    subject: Joi.string().optional(),\n    books: Joi.array().optional(),\n    materials: Joi.array().optional(),\n    updated_by: Joi.string().required(),\n};\n\nexport const curriculumSchema = {\n    code: { type: String, required: true },\n    title: { type: String, required: true },\n    description: { type: String, required: true },\n    term: { type: String, enum: [], required: true },\n    duration: { type: Number, comment: \"Workload in hours\" },\n    course: { type: ObjectId, ref: \"Course\" },\n    classes: [{ type: ObjectId, ref: \"Classe\" }],\n    subject: { type: ObjectId, ref: \"Subject\", required: true },\n    subsidiary: {\n        type: String,\n        enum: Object.values(SUBSIDIARY),\n        required: true,\n    },\n    level: {\n        type: Number,\n        enum: Object.values(LEVEL),\n        required: true,\n    },\n    books: [{ type: ObjectId, ref: \"Book\" }],\n    materials: [{ type: ObjectId, ref: \"Material\" }], // instructional materials\n    created_by: { type: ObjectId, ref: \"Staff\", required: true },\n    updated_by: { type: ObjectId, ref: \"Staff\" },\n};\n\nconst options = DATABASE.OPTIONS;\nconst newCurriculumSchema = new Schema(curriculumSchema, options);\nnewCurriculumSchema.set(\"collection\", \"curriculum\");\nnewCurriculumSchema.plugin(mongoose_csv);\nconst Curriculum = mongoose.model(\"Curriculum\", newCurriculumSchema);\n\n/**\n * @author 4Dcoder\n * @property {ObjectId} id Lesson primaryKey\n * @property {String} code Lesson code (required)\n * @property {String} title Lesson title (required)\n * @property {Number} duration Lesson duration (required)\n * @property {Date} start_date Lesson start_date (required)\n * @property {Date} end_date Lesson end_date (required)\n * @property {String} objective Lesson objective (required)\n * @property {Number} module Lesson module (required)\n * @property {Number} unit Lesson unit (required)\n * @property {String} description Lesson description\n * @property {ObjectId} teacher Lesson teacher (required)\n * @property {ObjectId} timetable Lesson timetable\n * @property {ObjectId} classe Lesson classe\n * @property {ObjectId} course Lesson course\n * @property {ObjectId} curriculum Lesson curriculum (required)\n * @property {String} remark Lesson remark\n * @property {String} status Lesson status\n * @description Lesson registers units covered in the curriculum\n */\n\nexport const lessonCreate = {\n    code: Joi.string().required(),\n    title: Joi.string().required(),\n    duration: Joi.date().required(),\n    start_date: Joi.date().required(),\n    end_date: Joi.date().required(),\n    objective: Joi.string().required(),\n    module: Joi.number().required(),\n    unit: Joi.number().required(),\n    description: Joi.string().required(),\n    teacher: Joi.string().required(),\n    timetable: Joi.string().optional(),\n    classe: Joi.string().optional(),\n    course: Joi.string().optional(),\n    curriculum: Joi.string().required(),\n    remark: Joi.string().optional(),\n    status: Joi.string().optional(),\n    created_by: Joi.string().required(),\n};\n\nexport const lessonUpdate = {\n    code: Joi.string().optional(),\n    title: Joi.string().optional(),\n    duration: Joi.date().optional(),\n    start_date: Joi.date().optional(),\n    end_date: Joi.date().optional(),\n    objective: Joi.string().optional(),\n    module: Joi.number().optional(),\n    unit: Joi.number().optional(),\n    description: Joi.string().optional(),\n    teacher: Joi.string().optional(),\n    timetable: Joi.string().optional(),\n    classe: Joi.string().optional(),\n    course: Joi.string().optional(),\n    curriculum: Joi.string().optional(),\n    remark: Joi.string().optional(),\n    status: Joi.string().optional(),\n    updated_by: Joi.string().required(),\n};\n\nexport const lessonSchema = {\n    code: { type: String, required: true, unique: true },\n    title: { type: String, required: true },\n    duration: { type: Date },\n    start_date: { type: Date },\n    end_date: { type: Date },\n    objective: { type: String },\n    module: { type: Number }, // Chapter\n    unit: { type: Number }, // Section\n    description: { type: String },\n    teacher: { type: ObjectId, ref: \"Staff\" },\n    timetable: { type: String, ref: \"Timetable\" },\n    classe: { type: String, ref: \"Classe\", required: true },\n    course: { type: String, ref: \"Course\" },\n    curriculum: { type: String, ref: \"Curriculum\", required: true },\n    remark: { type: String },\n    status: { type: String }, // Completed?\n    deleted: { type: Boolean, default: false, required: true },\n    deleted_at: { type: Date },\n    created_by: { type: ObjectId, ref: \"Staff\", required: true },\n    updated_by: { type: ObjectId, ref: \"Staff\" },\n};\n\nconst newLessonSchema = new Schema(lessonSchema, options);\nnewLessonSchema.set(\"collection\", \"lesson\");\nnewLessonSchema.plugin(mongoose_csv);\n\nconst Lesson = mongoose.model(\"Lesson\", newLessonSchema);\n\nexport { Curriculum, Lesson };\n"]}