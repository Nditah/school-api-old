{"version":3,"sources":["../../../../src/api/general/voucher/model.js"],"names":["Joi","mongoose","mongoose_csv","DATABASE","PAYMENT","table","Staff","AccountHeading","Schema","ObjectId","Types","RECORD_STATUS","schemaCreate","code","string","optional","related_voucher_id","stage_id","account_heading_id","terminal_id","subsidiary","amount","description","voucher_type","valid","processing","beneficiary","required","staff_id","partner_id","acknowledge_by","acknowledge_date","date","endorsed_date","endorsed_by","authorized_date","authorized_by","approved_by","approved_date","paid_by","paid_date","payment_method","Object","values","METHOD","payment_gateway","GATEWAY","payment_status","STATUS","received_by","received_date","checked_by","checked_date","audited_by","audited_date","created_by","schemaUpdate","remark","updated_by","schemaAudit","audited_status","audited_remark","schema","type","String","ref","Number","enum","default","open_date","Date","CASH","UNIONBANK","PENDING","preload","PRELOAD_TABLE_DATA","DEFAULT","options","OPTIONS","newSchema","set","Voucher","model","insertMany"],"mappings":"AAAA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqCA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,QAAP,MAAqB,UAArB;AACA;AACA,OAAOC,YAAP,MAAyB,cAAzB;AACA,SAASC,QAAT,EAAmBC,OAAnB,QAAkC,oBAAlC;AACA,OAAOC,KAAP,MAAkB,SAAlB;AACA,OAAOC,KAAP,MAAkB,gBAAlB;AACA,OAAOC,cAAP,MAA2B,0BAA3B;;AAEA,MAAM,EAAEC,MAAF,KAAaP,QAAnB;AACA,MAAM,EAAEQ,QAAF,KAAeD,OAAOE,KAA5B;AACA,MAAM,EAAEC,aAAF,KAAoBR,QAA1B;;AAEA,OAAO,MAAMS,eAAe;AACxBC,UAAMb,IAAIc,MAAJ,GAAaC,QAAb,EADkB;AAExBC,wBAAoBhB,IAAIc,MAAJ,GAAaC,QAAb,EAFI;AAGxBE,cAAUjB,IAAIc,MAAJ,GAAaC,QAAb,EAHc;AAIxBG,wBAAoBlB,IAAIc,MAAJ,GAAaC,QAAb,EAJI;AAKxBI,iBAAanB,IAAIc,MAAJ,GAAaC,QAAb,EALW;AAMxBK,gBAAYpB,IAAIc,MAAJ,GAAaC,QAAb,EANY;AAOxBM,YAAQrB,IAAIc,MAAJ,GAAaC,QAAb,EAPgB;AAQxBO,iBAAatB,IAAIc,MAAJ,GAAaC,QAAb,EARW;AASxBQ,kBAAcvB,IAAIc,MAAJ,GAAaU,KAAb,CAAmB,SAAnB,EAA8B,SAA9B,EAAyC,YAAzC,EAAuDT,QAAvD,EATU;AAUxBU,gBAAYzB,IAAIc,MAAJ,GAAaU,KAAb,CAAmB,SAAnB,EAA8B,UAA9B,EAA0C,QAA1C,EAAoDT,QAApD,EAVY;AAWxBW,iBAAa1B,IAAIc,MAAJ,GAAaU,KAAb,CAAmB,OAAnB,EAA4B,SAA5B,EAAuCG,QAAvC,EAXW;AAYxBC,cAAU5B,IAAIc,MAAJ,GAAaC,QAAb,EAZc;AAaxBc,gBAAY7B,IAAIc,MAAJ,GAAaC,QAAb,EAbY;AAcxBe,oBAAgB9B,IAAIc,MAAJ,GAAaC,QAAb,EAdQ;AAexBgB,sBAAkB/B,IAAIgC,IAAJ,GAAWjB,QAAX,EAfM;AAgBxBkB,mBAAejC,IAAIgC,IAAJ,GAAWjB,QAAX,EAhBS;AAiBxBmB,iBAAalC,IAAIc,MAAJ,GAAaC,QAAb,EAjBW;AAkBxBoB,qBAAiBnC,IAAIgC,IAAJ,GAAWjB,QAAX,EAlBO;AAmBxBqB,mBAAepC,IAAIc,MAAJ,GAAaC,QAAb,EAnBS;AAoBxBsB,iBAAarC,IAAIc,MAAJ,GAAaC,QAAb,EApBW;AAqBxBuB,mBAAetC,IAAIgC,IAAJ,GAAWjB,QAAX,EArBS;AAsBxBwB,aAASvC,IAAIc,MAAJ,GAAaC,QAAb,EAtBe;AAuBxByB,eAAWxC,IAAIgC,IAAJ,GAAWjB,QAAX,EAvBa;AAwBxB0B,oBAAgBzC,IAAIc,MAAJ,GAAaU,KAAb,CAAmBkB,OAAOC,MAAP,CAAcvC,QAAQwC,MAAtB,CAAnB,EAAkD7B,QAAlD,EAxBQ;AAyBxB8B,qBAAiB7C,IAAIc,MAAJ,GAAaU,KAAb,CAAmBkB,OAAOC,MAAP,CAAcvC,QAAQ0C,OAAtB,CAAnB,EAAmD/B,QAAnD,EAzBO;AA0BxBgC,oBAAgB/C,IAAIc,MAAJ,GAAaU,KAAb,CAAmBkB,OAAOC,MAAP,CAAcvC,QAAQ4C,MAAtB,CAAnB,EAAkDjC,QAAlD,EA1BQ;AA2BxBkC,iBAAajD,IAAIc,MAAJ,GAAaC,QAAb,EA3BW;AA4BxBmC,mBAAelD,IAAIgC,IAAJ,GAAWjB,QAAX,EA5BS;AA6BxBoC,gBAAYnD,IAAIc,MAAJ,GAAaC,QAAb,EA7BY;AA8BxBqC,kBAAcpD,IAAIgC,IAAJ,GAAWjB,QAAX,EA9BU;AA+BxBsC,gBAAYrD,IAAIc,MAAJ,GAAaC,QAAb,EA/BY;AAgCxBuC,kBAActD,IAAIgC,IAAJ,GAAWjB,QAAX,EAhCU;AAiCxBwC,gBAAYvD,IAAIc,MAAJ,GAAaa,QAAb;AAjCY,CAArB;;AAoCP,OAAO,MAAM6B,eAAe;AACxB3C,UAAMb,IAAIc,MAAJ,GAAaC,QAAb,EADkB;AAExBC,wBAAoBhB,IAAIc,MAAJ,GAAaC,QAAb,EAFI;AAGxBE,cAAUjB,IAAIc,MAAJ,GAAaC,QAAb,EAHc;AAIxBG,wBAAoBlB,IAAIc,MAAJ,GAAaC,QAAb,EAJI;AAKxBI,iBAAanB,IAAIc,MAAJ,GAAaC,QAAb,EALW;AAMxBK,gBAAYpB,IAAIc,MAAJ,GAAaC,QAAb,EANY;AAOxBM,YAAQrB,IAAIc,MAAJ,GAAaC,QAAb,EAPgB;AAQxBO,iBAAatB,IAAIc,MAAJ,GAAaC,QAAb,EARW;AASxBQ,kBAAcvB,IAAIc,MAAJ,GAAaU,KAAb,CAAmB,SAAnB,EAA8B,SAA9B,EAAyC,YAAzC,EAAuDT,QAAvD,EATU;AAUxBU,gBAAYzB,IAAIc,MAAJ,GAAaU,KAAb,CAAmB,SAAnB,EAA8B,UAA9B,EAA0C,QAA1C,EAAoDT,QAApD,EAVY;AAWxBW,iBAAa1B,IAAIc,MAAJ,GAAaU,KAAb,CAAmB,OAAnB,EAA4B,SAA5B,EAAuCT,QAAvC,EAXW;AAYxBa,cAAU5B,IAAIc,MAAJ,GAAaC,QAAb,EAZc;AAaxBc,gBAAY7B,IAAIc,MAAJ,GAAaC,QAAb,EAbY;AAcxBe,oBAAgB9B,IAAIc,MAAJ,GAAaC,QAAb,EAdQ;AAexBgB,sBAAkB/B,IAAIgC,IAAJ,GAAWjB,QAAX,EAfM;AAgBxBkB,mBAAejC,IAAIgC,IAAJ,GAAWjB,QAAX,EAhBS;AAiBxBmB,iBAAalC,IAAIc,MAAJ,GAAaC,QAAb,EAjBW;AAkBxBoB,qBAAiBnC,IAAIgC,IAAJ,GAAWjB,QAAX,EAlBO;AAmBxBqB,mBAAepC,IAAIc,MAAJ,GAAaC,QAAb,EAnBS;AAoBxBsB,iBAAarC,IAAIc,MAAJ,GAAaC,QAAb,EApBW;AAqBxBuB,mBAAetC,IAAIgC,IAAJ,GAAWjB,QAAX,EArBS;AAsBxBwB,aAASvC,IAAIc,MAAJ,GAAaC,QAAb,EAtBe;AAuBxByB,eAAWxC,IAAIgC,IAAJ,GAAWjB,QAAX,EAvBa;AAwBxB0B,oBAAgBzC,IAAIc,MAAJ,GAAaU,KAAb,CAAmBkB,OAAOC,MAAP,CAAcvC,QAAQwC,MAAtB,CAAnB,EAAkD7B,QAAlD,EAxBQ;AAyBxB8B,qBAAiB7C,IAAIc,MAAJ,GAAaU,KAAb,CAAmBkB,OAAOC,MAAP,CAAcvC,QAAQ0C,OAAtB,CAAnB,EAAmD/B,QAAnD,EAzBO;AA0BxBgC,oBAAgB/C,IAAIc,MAAJ,GAAaU,KAAb,CAAmBkB,OAAOC,MAAP,CAAcvC,QAAQ4C,MAAtB,CAAnB,EAAkDjC,QAAlD,EA1BQ;AA2BxBkC,iBAAajD,IAAIc,MAAJ,GAAaC,QAAb,EA3BW;AA4BxBmC,mBAAelD,IAAIgC,IAAJ,GAAWjB,QAAX,EA5BS;AA6BxBoC,gBAAYnD,IAAIc,MAAJ,GAAaC,QAAb,EA7BY;AA8BxBqC,kBAAcpD,IAAIgC,IAAJ,GAAWjB,QAAX,EA9BU;AA+BxB0C,YAAQzD,IAAIc,MAAJ,GAAaC,QAAb,EA/BgB;AAgCxB2C,gBAAY1D,IAAIc,MAAJ,GAAaa,QAAb;AAhCY,CAArB;;AAmCP,OAAO,MAAMgC,cAAc;AACvBC,oBAAgB5D,IAAIc,MAAJ,GAAaU,KAAb,CAAmBkB,OAAOC,MAAP,CAAchC,aAAd,CAAnB,EAAiDgB,QAAjD,EADO;AAEvB0B,gBAAYrD,IAAIc,MAAJ,GAAaa,QAAb,EAFW;AAGvB2B,kBAActD,IAAIgC,IAAJ,GAAWL,QAAX,EAHS;AAIvBkC,oBAAgB7D,IAAIc,MAAJ,GAAaa,QAAb,EAJO;AAKvB+B,gBAAY1D,IAAIc,MAAJ,GAAaa,QAAb;AALW,CAApB;;AAQP,OAAO,MAAMmC,SAAS;AAClBjD,UAAM,EAAEkD,MAAMC,MAAR,EADY;AAElBhD,wBAAoB,EAAE+C,MAAMtD,QAAR,EAAkBwD,KAAK,SAAvB,EAFF;AAGlBhD,cAAU,EAAE8C,MAAMtD,QAAR,EAAkBwD,KAAK,OAAvB,EAAgCtC,UAAU,IAA1C,EAHQ;AAIlBT,wBAAoB,EAAE6C,MAAMtD,QAAR,EAAkBwD,KAAK,gBAAvB,EAAyCtC,UAAU,IAAnD,EAJF;AAKlBR,iBAAa,EAAE4C,MAAMtD,QAAR,EAAkBwD,KAAK,UAAvB,EALK;AAMlB7C,gBAAY,EAAE2C,MAAMC,MAAR,EANM;AAOlB3C,YAAQ,EAAE0C,MAAMG,MAAR,EAPU;AAQlB5C,iBAAa,EAAEyC,MAAMC,MAAR,EARK;AASlBzC,kBAAc,EAAEwC,MAAMC,MAAR,EAAgBG,MAAM,CAAC,SAAD,EAAY,SAAZ,EAAuB,YAAvB,CAAtB,EATI;AAUlB1C,gBAAY,EAAEsC,MAAMC,MAAR,EAAgBG,MAAM,CAAC,SAAD,EAAY,UAAZ,EAAwB,QAAxB,CAAtB,EAAyDC,SAAS,SAAlE,EAVM;AAWlBC,eAAW,EAAEN,MAAMO,IAAR,EAXO;AAYlB5C,iBAAa,EAAEqC,MAAMC,MAAR,EAAgBG,MAAM,CAAC,OAAD,EAAU,SAAV,CAAtB,EAZK;AAalBvC,cAAU,EAAEmC,MAAMtD,QAAR,EAAkBwD,KAAK,OAAvB,EAbQ;AAclBpC,gBAAY,EAAEkC,MAAMtD,QAAR,EAAkBwD,KAAK,SAAvB,EAdM;AAelBnC,oBAAgB,EAAEiC,MAAMtD,QAAR,EAAkBwD,KAAK,OAAvB,EAfE;AAgBlBlC,sBAAkB,EAAEgC,MAAMO,IAAR,EAhBA;AAiBlBrC,mBAAe,EAAE8B,MAAMO,IAAR,EAjBG;AAkBlBpC,iBAAa,EAAE6B,MAAMtD,QAAR,EAAkBwD,KAAK,OAAvB,EAlBK;AAmBlB9B,qBAAiB,EAAE4B,MAAMO,IAAR,EAnBC;AAoBlBlC,mBAAe,EAAE2B,MAAMtD,QAAR,EAAkBwD,KAAK,OAAvB,EApBG;AAqBlB5B,iBAAa,EAAE0B,MAAMtD,QAAR,EAAkBwD,KAAK,OAAvB,EArBK;AAsBlB3B,mBAAe,EAAEyB,MAAMO,IAAR,EAtBG;AAuBlB/B,aAAS,EAAEwB,MAAMtD,QAAR,EAAkBwD,KAAK,OAAvB,EAvBS;AAwBlBzB,eAAW,EAAEuB,MAAMO,IAAR,EAxBO;AAyBlB7B,oBAAgB;AACZsB,cAAMC,MADM;AAEZG,cAAMzB,OAAOC,MAAP,CAAcvC,QAAQwC,MAAtB,CAFM;AAGZjB,kBAAU,CAAC,IAAD,EAAO,wBAAP,CAHE;AAIZyC,iBAAShE,QAAQwC,MAAR,CAAe2B;AAJZ,KAzBE;AA+BlB1B,qBAAiB;AACbkB,cAAMC,MADO;AAEbG,cAAMzB,OAAOC,MAAP,CAAcvC,QAAQ0C,OAAtB,CAFO;AAGbnB,kBAAU,CAAC,IAAD,EAAO,wBAAP,CAHG;AAIbyC,iBAAShE,QAAQ0C,OAAR,CAAgB0B;AAJZ,KA/BC;AAqClBzB,oBAAgB;AACZgB,cAAMC,MADM;AAEZG,cAAMzB,OAAOC,MAAP,CAAcvC,QAAQ4C,MAAtB,CAFM;AAGZrB,kBAAU,CAAC,IAAD,EAAO,wBAAP,CAHE;AAIZyC,iBAAShE,QAAQ4C,MAAR,CAAeyB;AAJZ,KArCE;AA2ClBxB,iBAAa,EAAEc,MAAMtD,QAAR,EAAkBwD,KAAK,OAAvB,EA3CK;AA4ClBf,mBAAe,EAAEa,MAAMO,IAAR,EA5CG;AA6ClBnB,gBAAY,EAAEY,MAAMtD,QAAR,EAAkBwD,KAAK,OAAvB,EA7CM;AA8ClBb,kBAAc,EAAEW,MAAMO,IAAR,EA9CI;AA+ClBb,YAAQ,EAAEM,MAAMC,MAAR,EA/CU;AAgDlBT,gBAAY,EAAEQ,MAAMtD,QAAR,EAAkBwD,KAAK,OAAvB,EAAgCtC,UAAU,IAA1C,EAhDM;AAiDlB+B,gBAAY,EAAEK,MAAMtD,QAAR,EAAkBwD,KAAK,OAAvB,EAjDM;AAkDlBL,oBAAgB;AACZG,cAAMC,MADM;AAEZG,cAAMzB,OAAOC,MAAP,CAAchC,aAAd,CAFM;AAGZyD,iBAASzD,cAAc8D;AAHX,KAlDE;AAuDlBpB,gBAAY,EAAEU,MAAMtD,QAAR,EAAkBwD,KAAK,OAAvB,EAvDM;AAwDlBX,kBAAc,EAAES,MAAMO,IAAR,EAxDI;AAyDlBT,oBAAgB,EAAEE,MAAMC,MAAR;AAzDE,CAAf;;AA4DP,MAAMU,UAAUvE,SAASwE,kBAAT,CAA4BC,OAA5C;AACA,MAAMC,UAAU1E,SAAS2E,OAAzB;;AAEA,MAAMC,YAAY,IAAIvE,MAAJ,CAAWsD,MAAX,EAAmBe,OAAnB,CAAlB;AACAE,UAAUC,GAAV,CAAc,YAAd,EAA4B,SAA5B;;AAEA,MAAMC,UAAUhF,SAASiF,KAAT,CAAe,SAAf,EAA0BH,SAA1B,CAAhB;;AAEA,IAAIL,OAAJ,EAAa;AAAEO,YAAQE,UAAR,CAAmB9E,KAAnB;AAA4B;;AAE3C,eAAe4E,OAAf","file":"model.js","sourcesContent":["/* eslint-disable import/no-cycle */\n/**\n * @author 4Dcoder\n * @property {ObjectId} id Voucher primaryKey\n * @property {String} code Voucher transaction code\n * @property {ObjectId} related_voucher_id Voucher related voucher ObjectId\n * @property {ObjectId} stage_id Voucher voucher_stage ObjectId\n * @property {ObjectId} account_heading_id Voucher AccountHeading ObjectId\n * @property {ObjectId} terminal_id Voucher Terminal ObjectId\n * @property {String} subsidiary Voucher Department\n * @property {Number} amount Voucher Amount to be paid\n * @property {String} description Voucher Transaction description\n * @property {String} voucher_type Voucher \"PAYMENT|ADVANCE|RETIREMENT\" (required)\n * @property {String} processing Voucher \"PENDING|COMPLETE|CANCEL\" (required)\n * @property {String} beneficiary Voucher \"STAFF|PARTNER\" (required)\n * @property {ObjectId} staff_id Voucher beneficiary staff ObjectId\n * @property {ObjectId} partner_id Voucher beneficiary driver ObjectId\n * @property {ObjectId} acknowledge_by Voucher beneficiary HoD staff ObjectId\n * @property {Date} acknowledge_date Voucher acknowledgement date\n * @property {String} endorsed_date Voucher endorsement date\n * @property {ObjectId} endorsed_by Voucher endorsing staff ObjectId\n * @property {Date} authorized_date Voucher authorizing date\n * @property {ObjectId} authorized_by Voucher authorizing staff ObjectId\n * @property {ObjectId} approved_by Voucher approval staff ObjectId\n * @property {Date} approved_date Voucher approval date\n * @property {ObjectId} paid_by Voucher payment staff ObjectId\n * @property {Date} paid_date Voucher payment date\n * @property {String} payment_method PayrollDetail payment method GATEWAY (required)\n * @property {String} payment_gateway PayrollDetail payment gateway UNIONBANK (required)\n * @property {String} payment_status PayrollDetail transaction status (prohibited)\n * @property {String} received_by Voucher payment reciever signs with name\n * @property {Date} received_date Voucher date of payment\n * @property {ObjectId} checked_by Voucher finance officer\n * @property {Date} checked_date Voucher finance dept check\n * @property {ObjectId} audited_by Voucher auditor\n * @property {Date} audited_date Voucher audit date\n * @description Voucher model holds record of all cash-outflow\n */\nimport Joi from \"joi\";\nimport mongoose from \"mongoose\";\n// eslint-disable-next-line camelcase\nimport mongoose_csv from \"mongoose-csv\";\nimport { DATABASE, PAYMENT } from \"../../../constants\";\nimport table from \"./table\";\nimport Staff from \"../staff/model\";\nimport AccountHeading from \"../account-heading/model\";\n\nconst { Schema } = mongoose;\nconst { ObjectId } = Schema.Types;\nconst { RECORD_STATUS } = DATABASE;\n\nexport const schemaCreate = {\n    code: Joi.string().optional(),\n    related_voucher_id: Joi.string().optional(),\n    stage_id: Joi.string().optional(),\n    account_heading_id: Joi.string().optional(),\n    terminal_id: Joi.string().optional(),\n    subsidiary: Joi.string().optional(),\n    amount: Joi.string().optional(),\n    description: Joi.string().optional(),\n    voucher_type: Joi.string().valid(\"PAYMENT\", \"ADVANCE\", \"RETIREMENT\").optional(),\n    processing: Joi.string().valid(\"PENDING\", \"COMPLETE\", \"CANCEL\").optional(),\n    beneficiary: Joi.string().valid(\"STAFF\", \"PARTNER\").required(),\n    staff_id: Joi.string().optional(),\n    partner_id: Joi.string().optional(),\n    acknowledge_by: Joi.string().optional(),\n    acknowledge_date: Joi.date().optional(),\n    endorsed_date: Joi.date().optional(),\n    endorsed_by: Joi.string().optional(),\n    authorized_date: Joi.date().optional(),\n    authorized_by: Joi.string().optional(),\n    approved_by: Joi.string().optional(),\n    approved_date: Joi.date().optional(),\n    paid_by: Joi.string().optional(),\n    paid_date: Joi.date().optional(),\n    payment_method: Joi.string().valid(Object.values(PAYMENT.METHOD)).optional(),\n    payment_gateway: Joi.string().valid(Object.values(PAYMENT.GATEWAY)).optional(),\n    payment_status: Joi.string().valid(Object.values(PAYMENT.STATUS)).optional(),\n    received_by: Joi.string().optional(),\n    received_date: Joi.date().optional(),\n    checked_by: Joi.string().optional(),\n    checked_date: Joi.date().optional(),\n    audited_by: Joi.string().optional(),\n    audited_date: Joi.date().optional(),\n    created_by: Joi.string().required(),\n};\n\nexport const schemaUpdate = {\n    code: Joi.string().optional(),\n    related_voucher_id: Joi.string().optional(),\n    stage_id: Joi.string().optional(),\n    account_heading_id: Joi.string().optional(),\n    terminal_id: Joi.string().optional(),\n    subsidiary: Joi.string().optional(),\n    amount: Joi.string().optional(),\n    description: Joi.string().optional(),\n    voucher_type: Joi.string().valid(\"PAYMENT\", \"ADVANCE\", \"RETIREMENT\").optional(),\n    processing: Joi.string().valid(\"PENDING\", \"COMPLETE\", \"CANCEL\").optional(),\n    beneficiary: Joi.string().valid(\"STAFF\", \"PARTNER\").optional(),\n    staff_id: Joi.string().optional(),\n    partner_id: Joi.string().optional(),\n    acknowledge_by: Joi.string().optional(),\n    acknowledge_date: Joi.date().optional(),\n    endorsed_date: Joi.date().optional(),\n    endorsed_by: Joi.string().optional(),\n    authorized_date: Joi.date().optional(),\n    authorized_by: Joi.string().optional(),\n    approved_by: Joi.string().optional(),\n    approved_date: Joi.date().optional(),\n    paid_by: Joi.string().optional(),\n    paid_date: Joi.date().optional(),\n    payment_method: Joi.string().valid(Object.values(PAYMENT.METHOD)).optional(),\n    payment_gateway: Joi.string().valid(Object.values(PAYMENT.GATEWAY)).optional(),\n    payment_status: Joi.string().valid(Object.values(PAYMENT.STATUS)).optional(),\n    received_by: Joi.string().optional(),\n    received_date: Joi.date().optional(),\n    checked_by: Joi.string().optional(),\n    checked_date: Joi.date().optional(),\n    remark: Joi.string().optional(),\n    updated_by: Joi.string().required(),\n};\n\nexport const schemaAudit = {\n    audited_status: Joi.string().valid(Object.values(RECORD_STATUS)).required(),\n    audited_by: Joi.string().required(),\n    audited_date: Joi.date().required(),\n    audited_remark: Joi.string().required(),\n    updated_by: Joi.string().required(),\n};\n\nexport const schema = {\n    code: { type: String },\n    related_voucher_id: { type: ObjectId, ref: \"Voucher\" },\n    stage_id: { type: ObjectId, ref: \"Stage\", required: true },\n    account_heading_id: { type: ObjectId, ref: \"AccountHeading\", required: true },\n    terminal_id: { type: ObjectId, ref: \"Terminal\" },\n    subsidiary: { type: String },\n    amount: { type: Number },\n    description: { type: String },\n    voucher_type: { type: String, enum: [\"PAYMENT\", \"ADVANCE\", \"RETIREMENT\"] },\n    processing: { type: String, enum: [\"PENDING\", \"COMPLETE\", \"CANCEL\"], default: \"PENDING\" },\n    open_date: { type: Date },\n    beneficiary: { type: String, enum: [\"STAFF\", \"PARTNER\"] },\n    staff_id: { type: ObjectId, ref: \"Staff\" },\n    partner_id: { type: ObjectId, ref: \"Partner\" },\n    acknowledge_by: { type: ObjectId, ref: \"Staff\" },\n    acknowledge_date: { type: Date },\n    endorsed_date: { type: Date },\n    endorsed_by: { type: ObjectId, ref: \"Staff\" },\n    authorized_date: { type: Date },\n    authorized_by: { type: ObjectId, ref: \"Staff\" },\n    approved_by: { type: ObjectId, ref: \"Staff\" },\n    approved_date: { type: Date },\n    paid_by: { type: ObjectId, ref: \"Staff\" },\n    paid_date: { type: Date },\n    payment_method: {\n        type: String,\n        enum: Object.values(PAYMENT.METHOD),\n        required: [true, \"Why no payment_method?\"],\n        default: PAYMENT.METHOD.CASH,\n    },\n    payment_gateway: {\n        type: String,\n        enum: Object.values(PAYMENT.GATEWAY),\n        required: [true, \"Why no payment_method?\"],\n        default: PAYMENT.GATEWAY.UNIONBANK,\n    },\n    payment_status: {\n        type: String,\n        enum: Object.values(PAYMENT.STATUS),\n        required: [true, \"Why no payment_status?\"],\n        default: PAYMENT.STATUS.PENDING,\n    },\n    received_by: { type: ObjectId, ref: \"Staff\" },\n    received_date: { type: Date },\n    checked_by: { type: ObjectId, ref: \"Staff\" },\n    checked_date: { type: Date },\n    remark: { type: String },\n    created_by: { type: ObjectId, ref: \"Staff\", required: true },\n    updated_by: { type: ObjectId, ref: \"Staff\" },\n    audited_status: {\n        type: String,\n        enum: Object.values(RECORD_STATUS),\n        default: RECORD_STATUS.PENDING,\n    },\n    audited_by: { type: ObjectId, ref: \"Staff\" },\n    audited_date: { type: Date },\n    audited_remark: { type: String },\n};\n\nconst preload = DATABASE.PRELOAD_TABLE_DATA.DEFAULT;\nconst options = DATABASE.OPTIONS;\n\nconst newSchema = new Schema(schema, options);\nnewSchema.set(\"collection\", \"voucher\");\n\nconst Voucher = mongoose.model(\"Voucher\", newSchema);\n\nif (preload) { Voucher.insertMany(table); }\n\nexport default Voucher;\n"]}