{"version":3,"sources":["../../../../src/api/general/voucher/model.js"],"names":["Schema","mongoose","ObjectId","Types","RECORD_STATUS","DATABASE","schemaCreate","code","Joi","string","optional","related_voucher_id","stage_id","account_heading_id","terminal_id","subsidiary","amount","description","voucher_type","valid","processing","beneficiary","required","staff_id","partner_id","acknowledge_by","acknowledge_date","date","endorsed_date","endorsed_by","authorized_date","authorized_by","approved_by","approved_date","paid_by","paid_date","payment_method","Object","values","PAYMENT","METHOD","payment_gateway","GATEWAY","payment_status","STATUS","received_by","received_date","checked_by","checked_date","audited_by","audited_date","created_by","schemaUpdate","remark","updated_by","schemaAudit","audited_status","audited_remark","schema","type","String","ref","Number","enum","default","open_date","Date","CASH","UNIONBANK","PENDING","preload","PRELOAD_TABLE_DATA","DEFAULT","options","OPTIONS","newSchema","set","Voucher","model","insertMany","table"],"mappings":"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","file":"model.js","sourcesContent":["/* eslint-disable import/no-cycle */\r\n/**\r\n * @author 4Dcoder\r\n * @property {ObjectId} id Voucher primaryKey\r\n * @property {String} code Voucher transaction code\r\n * @property {ObjectId} related_voucher_id Voucher related voucher ObjectId\r\n * @property {ObjectId} stage_id Voucher voucher_stage ObjectId\r\n * @property {ObjectId} account_heading_id Voucher AccountHeading ObjectId\r\n * @property {ObjectId} terminal_id Voucher Terminal ObjectId\r\n * @property {String} subsidiary Voucher Department\r\n * @property {Number} amount Voucher Amount to be paid\r\n * @property {String} description Voucher Transaction description\r\n * @property {String} voucher_type Voucher \"PAYMENT|ADVANCE|RETIREMENT\" (required)\r\n * @property {String} processing Voucher \"PENDING|COMPLETE|CANCEL\" (required)\r\n * @property {String} beneficiary Voucher \"STAFF|PARTNER\" (required)\r\n * @property {ObjectId} staff_id Voucher beneficiary staff ObjectId\r\n * @property {ObjectId} partner_id Voucher beneficiary driver ObjectId\r\n * @property {ObjectId} acknowledge_by Voucher beneficiary HoD staff ObjectId\r\n * @property {Date} acknowledge_date Voucher acknowledgement date\r\n * @property {String} endorsed_date Voucher endorsement date\r\n * @property {ObjectId} endorsed_by Voucher endorsing staff ObjectId\r\n * @property {Date} authorized_date Voucher authorizing date\r\n * @property {ObjectId} authorized_by Voucher authorizing staff ObjectId\r\n * @property {ObjectId} approved_by Voucher approval staff ObjectId\r\n * @property {Date} approved_date Voucher approval date\r\n * @property {ObjectId} paid_by Voucher payment staff ObjectId\r\n * @property {Date} paid_date Voucher payment date\r\n * @property {String} payment_method PayrollDetail payment method GATEWAY (required)\r\n * @property {String} payment_gateway PayrollDetail payment gateway UNIONBANK (required)\r\n * @property {String} payment_status PayrollDetail transaction status (prohibited)\r\n * @property {String} received_by Voucher payment reciever signs with name\r\n * @property {Date} received_date Voucher date of payment\r\n * @property {ObjectId} checked_by Voucher finance officer\r\n * @property {Date} checked_date Voucher finance dept check\r\n * @property {ObjectId} audited_by Voucher auditor\r\n * @property {Date} audited_date Voucher audit date\r\n * @description Voucher model holds record of all cash-outflow\r\n */\r\nimport Joi from \"joi\";\r\nimport mongoose from \"mongoose\";\r\n// eslint-disable-next-line camelcase\r\nimport mongoose_csv from \"mongoose-csv\";\r\nimport { DATABASE, PAYMENT } from \"../../../constants\";\r\nimport table from \"./table\";\r\nimport Staff from \"../staff/model\";\r\nimport AccountHeading from \"../account-heading/model\";\r\n\r\nconst { Schema } = mongoose;\r\nconst { ObjectId } = Schema.Types;\r\nconst { RECORD_STATUS } = DATABASE;\r\n\r\nexport const schemaCreate = {\r\n    code: Joi.string().optional(),\r\n    related_voucher_id: Joi.string().optional(),\r\n    stage_id: Joi.string().optional(),\r\n    account_heading_id: Joi.string().optional(),\r\n    terminal_id: Joi.string().optional(),\r\n    subsidiary: Joi.string().optional(),\r\n    amount: Joi.string().optional(),\r\n    description: Joi.string().optional(),\r\n    voucher_type: Joi.string().valid(\"PAYMENT\", \"ADVANCE\", \"RETIREMENT\").optional(),\r\n    processing: Joi.string().valid(\"PENDING\", \"COMPLETE\", \"CANCEL\").optional(),\r\n    beneficiary: Joi.string().valid(\"STAFF\", \"PARTNER\").required(),\r\n    staff_id: Joi.string().optional(),\r\n    partner_id: Joi.string().optional(),\r\n    acknowledge_by: Joi.string().optional(),\r\n    acknowledge_date: Joi.date().optional(),\r\n    endorsed_date: Joi.date().optional(),\r\n    endorsed_by: Joi.string().optional(),\r\n    authorized_date: Joi.date().optional(),\r\n    authorized_by: Joi.string().optional(),\r\n    approved_by: Joi.string().optional(),\r\n    approved_date: Joi.date().optional(),\r\n    paid_by: Joi.string().optional(),\r\n    paid_date: Joi.date().optional(),\r\n    payment_method: Joi.string().valid(Object.values(PAYMENT.METHOD)).optional(),\r\n    payment_gateway: Joi.string().valid(Object.values(PAYMENT.GATEWAY)).optional(),\r\n    payment_status: Joi.string().valid(Object.values(PAYMENT.STATUS)).optional(),\r\n    received_by: Joi.string().optional(),\r\n    received_date: Joi.date().optional(),\r\n    checked_by: Joi.string().optional(),\r\n    checked_date: Joi.date().optional(),\r\n    audited_by: Joi.string().optional(),\r\n    audited_date: Joi.date().optional(),\r\n    created_by: Joi.string().required(),\r\n};\r\n\r\nexport const schemaUpdate = {\r\n    code: Joi.string().optional(),\r\n    related_voucher_id: Joi.string().optional(),\r\n    stage_id: Joi.string().optional(),\r\n    account_heading_id: Joi.string().optional(),\r\n    terminal_id: Joi.string().optional(),\r\n    subsidiary: Joi.string().optional(),\r\n    amount: Joi.string().optional(),\r\n    description: Joi.string().optional(),\r\n    voucher_type: Joi.string().valid(\"PAYMENT\", \"ADVANCE\", \"RETIREMENT\").optional(),\r\n    processing: Joi.string().valid(\"PENDING\", \"COMPLETE\", \"CANCEL\").optional(),\r\n    beneficiary: Joi.string().valid(\"STAFF\", \"PARTNER\").optional(),\r\n    staff_id: Joi.string().optional(),\r\n    partner_id: Joi.string().optional(),\r\n    acknowledge_by: Joi.string().optional(),\r\n    acknowledge_date: Joi.date().optional(),\r\n    endorsed_date: Joi.date().optional(),\r\n    endorsed_by: Joi.string().optional(),\r\n    authorized_date: Joi.date().optional(),\r\n    authorized_by: Joi.string().optional(),\r\n    approved_by: Joi.string().optional(),\r\n    approved_date: Joi.date().optional(),\r\n    paid_by: Joi.string().optional(),\r\n    paid_date: Joi.date().optional(),\r\n    payment_method: Joi.string().valid(Object.values(PAYMENT.METHOD)).optional(),\r\n    payment_gateway: Joi.string().valid(Object.values(PAYMENT.GATEWAY)).optional(),\r\n    payment_status: Joi.string().valid(Object.values(PAYMENT.STATUS)).optional(),\r\n    received_by: Joi.string().optional(),\r\n    received_date: Joi.date().optional(),\r\n    checked_by: Joi.string().optional(),\r\n    checked_date: Joi.date().optional(),\r\n    remark: Joi.string().optional(),\r\n    updated_by: Joi.string().required(),\r\n};\r\n\r\nexport const schemaAudit = {\r\n    audited_status: Joi.string().valid(Object.values(RECORD_STATUS)).required(),\r\n    audited_by: Joi.string().required(),\r\n    audited_date: Joi.date().required(),\r\n    audited_remark: Joi.string().required(),\r\n    updated_by: Joi.string().required(),\r\n};\r\n\r\nexport const schema = {\r\n    code: { type: String },\r\n    related_voucher_id: { type: ObjectId, ref: \"Voucher\" },\r\n    stage_id: { type: ObjectId, ref: \"Stage\", required: true },\r\n    account_heading_id: { type: ObjectId, ref: \"AccountHeading\", required: true },\r\n    terminal_id: { type: ObjectId, ref: \"Terminal\" },\r\n    subsidiary: { type: String },\r\n    amount: { type: Number },\r\n    description: { type: String },\r\n    voucher_type: { type: String, enum: [\"PAYMENT\", \"ADVANCE\", \"RETIREMENT\"] },\r\n    processing: { type: String, enum: [\"PENDING\", \"COMPLETE\", \"CANCEL\"], default: \"PENDING\" },\r\n    open_date: { type: Date },\r\n    beneficiary: { type: String, enum: [\"STAFF\", \"PARTNER\"] },\r\n    staff_id: { type: ObjectId, ref: \"Staff\" },\r\n    partner_id: { type: ObjectId, ref: \"Partner\" },\r\n    acknowledge_by: { type: ObjectId, ref: \"Staff\" },\r\n    acknowledge_date: { type: Date },\r\n    endorsed_date: { type: Date },\r\n    endorsed_by: { type: ObjectId, ref: \"Staff\" },\r\n    authorized_date: { type: Date },\r\n    authorized_by: { type: ObjectId, ref: \"Staff\" },\r\n    approved_by: { type: ObjectId, ref: \"Staff\" },\r\n    approved_date: { type: Date },\r\n    paid_by: { type: ObjectId, ref: \"Staff\" },\r\n    paid_date: { type: Date },\r\n    payment_method: {\r\n        type: String,\r\n        enum: Object.values(PAYMENT.METHOD),\r\n        required: [true, \"Why no payment_method?\"],\r\n        default: PAYMENT.METHOD.CASH,\r\n    },\r\n    payment_gateway: {\r\n        type: String,\r\n        enum: Object.values(PAYMENT.GATEWAY),\r\n        required: [true, \"Why no payment_method?\"],\r\n        default: PAYMENT.GATEWAY.UNIONBANK,\r\n    },\r\n    payment_status: {\r\n        type: String,\r\n        enum: Object.values(PAYMENT.STATUS),\r\n        required: [true, \"Why no payment_status?\"],\r\n        default: PAYMENT.STATUS.PENDING,\r\n    },\r\n    received_by: { type: ObjectId, ref: \"Staff\" },\r\n    received_date: { type: Date },\r\n    checked_by: { type: ObjectId, ref: \"Staff\" },\r\n    checked_date: { type: Date },\r\n    remark: { type: String },\r\n    created_by: { type: ObjectId, ref: \"Staff\", required: true },\r\n    updated_by: { type: ObjectId, ref: \"Staff\" },\r\n    audited_status: {\r\n        type: String,\r\n        enum: Object.values(RECORD_STATUS),\r\n        default: RECORD_STATUS.PENDING,\r\n    },\r\n    audited_by: { type: ObjectId, ref: \"Staff\" },\r\n    audited_date: { type: Date },\r\n    audited_remark: { type: String },\r\n};\r\n\r\nconst preload = DATABASE.PRELOAD_TABLE_DATA.DEFAULT;\r\nconst options = DATABASE.OPTIONS;\r\n\r\nconst newSchema = new Schema(schema, options);\r\nnewSchema.set(\"collection\", \"voucher\");\r\n\r\nconst Voucher = mongoose.model(\"Voucher\", newSchema);\r\n\r\nif (preload) { Voucher.insertMany(table); }\r\n\r\nexport default Voucher;\r\n"]}