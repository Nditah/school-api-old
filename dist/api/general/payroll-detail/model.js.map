{"version":3,"sources":["../../../../src/api/general/payroll-detail/model.js"],"names":["Joi","mongoose","mongoose_csv","DATABASE","PAYMENT","table","Staff","Payroll","Schema","ObjectId","Types","schemaCreate","payroll_id","string","optional","code","trim","required","staff_id","salary","number","is_paid","boolean","paid_date","date","paid_by","remark","payment_method","valid","Object","values","METHOD","payment_gateway","GATEWAY","payment_status","STATUS","created_by","schemaUpdate","updated_by","schema","type","ref","String","comment","Number","Boolean","default","Date","enum","CASH","UNIONBANK","PENDING","preload","PRELOAD_TABLE_DATA","DEFAULT","options","OPTIONS","newSchema","set","PayrollDetail","model","insertMany"],"mappings":"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","file":"model.js","sourcesContent":["/* eslint-disable import/no-cycle */\n/* eslint-disable no-unused-vars */\n/**\n * @author 4Dcoder\n * @property {ObjectId} id PayrollDetail primaryKey\n * @property {ObjectId} payroll_id PayrollDetail payroll ObjectId\n * @property {String} code PayrollDetail code\n * @property {ObjectId} staff_id PayrollDetail staff_id\n * @property {Number} salary PayrollDetail salary\n * @property {Boolean} is_paid PayrollDetail is_paid\n * @property {Date} paid_date PayrollDetail paid_date\n * @property {ObjectId} paid_by PayrollDetail paid_by\n * @property {String} remark PayrollDetail remark\n * @property {String} payment_method PayrollDetail payment method GATEWAY (required)\n * @property {String} payment_gateway PayrollDetail payment gateway UNIONBANK (required)\n * @property {String} payment_status PayrollDetail transaction status (prohibited)\n * @description PayrollDetail model holds record of all Inventories except vehicles\n */\nimport Joi from \"joi\";\nimport mongoose from \"mongoose\";\n// eslint-disable-next-line camelcase\nimport mongoose_csv from \"mongoose-csv\";\nimport { DATABASE, PAYMENT } from \"../../../constants\";\nimport table from \"./table\";\nimport Staff from \"../staff/model\";\nimport Payroll from \"../payroll/model\";\n\nconst { Schema } = mongoose;\nconst { ObjectId } = Schema.Types;\n\nexport const schemaCreate = {\n    payroll_id: Joi.string().optional(),\n    code: Joi.string().trim().required(),\n    staff_id: Joi.string().optional(),\n    salary: Joi.number().optional(),\n    is_paid: Joi.boolean().optional(),\n    paid_date: Joi.date().optional(),\n    paid_by: Joi.string().optional(),\n    remark: Joi.string().optional(),\n    payment_method: Joi.string().valid(Object.values(PAYMENT.METHOD)).optional(),\n    payment_gateway: Joi.string().valid(Object.values(PAYMENT.GATEWAY)).optional(),\n    payment_status: Joi.string().valid(Object.values(PAYMENT.STATUS)).optional(),\n    created_by: Joi.string().required(),\n};\n\nexport const schemaUpdate = {\n    payroll_id: Joi.string().optional(),\n    code: Joi.string().trim().optional(),\n    staff_id: Joi.string().optional(),\n    salary: Joi.number().optional(),\n    is_paid: Joi.boolean().optional(),\n    paid_date: Joi.date().optional(),\n    paid_by: Joi.string().optional(),\n    remark: Joi.string().optional(),\n    payment_method: Joi.string().valid(Object.values(PAYMENT.METHOD)).optional(),\n    payment_gateway: Joi.string().valid(Object.values(PAYMENT.GATEWAY)).optional(),\n    payment_status: Joi.string().valid(Object.values(PAYMENT.STATUS)).optional(),\n    updated_by: Joi.string().required(),\n};\n\nexport const schema = {\n    payroll_id: { type: ObjectId, ref: \"Payroll\", required: true },\n    code: { type: String, required: true, comment: \"Transaction code\" },\n    staff_id: { type: ObjectId, ref: \"Staff\", required: true },\n    salary: { type: Number, required: true, comment: \"Gross Salary\" },\n    is_paid: { type: Boolean, required: true, default: false },\n    paid_date: { type: Date, required: true },\n    paid_by: { type: ObjectId, ref: \"Staff\", required: true },\n    remark: { type: String },\n    payment_method: {\n        type: String,\n        enum: Object.values(PAYMENT.METHOD),\n        required: [true, \"Why no payment_method?\"],\n        default: PAYMENT.METHOD.CASH,\n    },\n    payment_gateway: {\n        type: String,\n        enum: Object.values(PAYMENT.GATEWAY),\n        required: [true, \"Why no payment_method?\"],\n        default: PAYMENT.GATEWAY.UNIONBANK,\n    },\n    payment_status: {\n        type: String,\n        enum: Object.values(PAYMENT.STATUS),\n        required: [true, \"Why no payment_status?\"],\n        default: PAYMENT.STATUS.PENDING,\n    },\n    created_by: { type: ObjectId, required: true },\n    updated_by: { type: ObjectId, ref: \"Staff\" },\n};\n\nconst preload = DATABASE.PRELOAD_TABLE_DATA.DEFAULT;\nconst options = DATABASE.OPTIONS;\n\nconst newSchema = new Schema(schema, options);\nnewSchema.set(\"collection\", \"payroll_detail\");\n\nconst PayrollDetail = mongoose.model(\"PayrollDetail\", newSchema);\n\nif (preload) { PayrollDetail.insertMany(table); }\n\nexport default PayrollDetail;\n"]}