{"version":3,"sources":["../../../../src/api/general/classe/model.js"],"names":["Schema","mongoose","ObjectId","Types","schemaCreate","name","Joi","string","trim","required","code","subsidiary","valid","Object","values","SUBSIDIARY","level","number","LEVEL","master","optional","prefect","classroom","category","created_by","schemaUpdate","updated_by","schema","type","String","comment","unique","enum","Number","ref","deleted","Boolean","default","deleted_at","Date","options","DATABASE","OPTIONS","newSchema","set","Classe","model"],"mappings":";;;;;;;AAiBA;;;;AACA;;;;AAEA;;;;IAEQA,M,GAAWC,kB,CAAXD,M;AAHR;AAnBA;AACA;;;;;;;;;;;;;;;;IAsBQE,Q,GAAaF,OAAOG,K,CAApBD,Q;AAED,IAAME,sCAAe;AACxBC,UAAMC,cAAIC,MAAJ,GAAaC,IAAb,GAAoBC,QAApB,EADkB;AAExBC,UAAMJ,cAAIC,MAAJ,GAAaE,QAAb,EAFkB;AAGxBE,gBAAYL,cAAIC,MAAJ,GAAaC,IAAb,GAAoBI,KAApB,CAA0BC,OAAOC,MAAP,CAAcC,qBAAd,CAA1B,EAAqDN,QAArD,EAHY;AAIxBO,WAAOV,cAAIW,MAAJ,GAAaL,KAAb,CAAmBC,OAAOC,MAAP,CAAcI,gBAAd,CAAnB,EAAyCT,QAAzC,EAJiB;AAKxBU,YAAQb,cAAIC,MAAJ,GAAaa,QAAb,EALgB;AAMxBC,aAASf,cAAIC,MAAJ,GAAaa,QAAb,EANe;AAOxBE,eAAWhB,cAAIC,MAAJ,GAAaa,QAAb,EAPa;AAQxBG,cAAUjB,cAAIC,MAAJ,GAAaa,QAAb,EARc;AASxBI,gBAAYlB,cAAIC,MAAJ,GAAaE,QAAb;AATY,CAArB;;AAYA,IAAMgB,sCAAe;AACxBpB,UAAMC,cAAIC,MAAJ,GAAaC,IAAb,GAAoBY,QAApB,EADkB;AAExBV,UAAMJ,cAAIC,MAAJ,GAAaa,QAAb,EAFkB;AAGxBT,gBAAYL,cAAIC,MAAJ,GAAaC,IAAb,GAAoBI,KAApB,CAA0BC,OAAOC,MAAP,CAAcC,qBAAd,CAA1B,EAAqDK,QAArD,EAHY;AAIxBJ,WAAOV,cAAIW,MAAJ,GAAaL,KAAb,CAAmBC,OAAOC,MAAP,CAAcI,gBAAd,CAAnB,EAAyCE,QAAzC,EAJiB;AAKxBD,YAAQb,cAAIC,MAAJ,GAAaa,QAAb,EALgB;AAMxBC,aAASf,cAAIC,MAAJ,GAAaa,QAAb,EANe;AAOxBE,eAAWhB,cAAIC,MAAJ,GAAaa,QAAb,EAPa;AAQxBG,cAAUjB,cAAIC,MAAJ,GAAaa,QAAb,EARc;AASxBM,gBAAYpB,cAAIC,MAAJ,GAAaE,QAAb;AATY,CAArB;;AAYA,IAAMkB,0BAAS;AAClBtB,UAAM,EAAEuB,MAAMC,MAAR,EAAgBpB,UAAU,IAA1B,EAAgCqB,SAAS,OAAzC,EADY;AAElBpB,UAAM,EAAEkB,MAAMC,MAAR,EAAgBpB,UAAU,IAA1B,EAAgCsB,QAAQ,IAAxC,EAFY,EAEoC;AACtDpB,gBAAY;AACRiB,cAAMC,MADE;AAERG,cAAMnB,OAAOC,MAAP,CAAcC,qBAAd,CAFE;AAGRN,kBAAU,CAAC,KAAD,EAAQ,eAAR;AAHF,KAHM;AAQlBO,WAAO;AACHY,cAAMK,MADH;AAEHD,cAAMnB,OAAOC,MAAP,CAAcI,gBAAd,CAFH;AAGHT,kBAAU;AAHP,KARW;AAalBU,YAAQ,EAAES,MAAM1B,QAAR,EAAkBgC,KAAK,OAAvB,EAAgCJ,SAAS,cAAzC,EAbU;AAclBT,aAAS,EAAEO,MAAM1B,QAAR,EAAkBgC,KAAK,SAAvB,EAAkCJ,SAAS,SAA3C,EAdS;AAelBR,eAAW,EAAEM,MAAM1B,QAAR,EAAkBgC,KAAK,WAAvB,EAfO;AAgBlBX,cAAU,EAAEK,MAAM1B,QAAR,EAAkBgC,KAAK,UAAvB,EAhBQ;AAiBlBC,aAAS,EAAEP,MAAMQ,OAAR,EAAiBC,SAAS,KAA1B,EAAiC5B,UAAU,IAA3C,EAjBS;AAkBlB6B,gBAAY,EAAEV,MAAMW,IAAR,EAlBM;AAmBlBf,gBAAY,EAAEI,MAAM1B,QAAR,EAAkBgC,KAAK,OAAvB,EAAgCzB,UAAU,IAA1C,EAnBM;AAoBlBiB,gBAAY,EAAEE,MAAM1B,QAAR,EAAkBgC,KAAK,OAAvB;AApBM,CAAf;;AAuBP,IAAMM,UAAUC,oBAASC,OAAzB;;AAEA,IAAMC,YAAY,IAAI3C,MAAJ,CAAW2B,MAAX,EAAmBa,OAAnB,CAAlB;AACAG,UAAUC,GAAV,CAAc,YAAd,EAA4B,QAA5B;;AAEA,IAAMC,SAAS5C,mBAAS6C,KAAT,CAAe,QAAf,EAAyBH,SAAzB,CAAf;;kBAEeE,M","file":"model.js","sourcesContent":["/* eslint-disable import/no-cycle */\n/**\n * @author 4Decoder\n * @property {ObjectId} id Classe ObjectId primaryKey\n * @property {String} name Classe name - external (required)\n * @property {String} code Classe code - internal (required)\n * @property {String} subsidiary Classe subsidiary (required)\n * @property {String} level Classe level [1-7]\n * @property {ObjectId} master Classe master or form teacher (optional)\n * @property {ObjectId} prefect Classe prefect or class captain (optional)\n * @property {ObjectId} classroom Classe classroom or lesson venue (optional)\n * @property {ObjectId} category Classe category or type (optional)\n * @property {ObjectId} created_by Classe record created by\n * @property {ObjectId} updated_by Classe record modified by\n * @description Classe holds record of all classes in the school.\n */\n\nimport Joi from \"joi\";\nimport mongoose from \"mongoose\";\n// eslint-disable-next-line camelcase\nimport { DATABASE, SUBSIDIARY, LEVEL } from \"../../../constants\";\n\nconst { Schema } = mongoose;\nconst { ObjectId } = Schema.Types;\n\nexport const schemaCreate = {\n    name: Joi.string().trim().required(),\n    code: Joi.string().required(),\n    subsidiary: Joi.string().trim().valid(Object.values(SUBSIDIARY)).required(),\n    level: Joi.number().valid(Object.values(LEVEL)).required(),\n    master: Joi.string().optional(),\n    prefect: Joi.string().optional(),\n    classroom: Joi.string().optional(),\n    category: Joi.string().optional(),\n    created_by: Joi.string().required(),\n};\n\nexport const schemaUpdate = {\n    name: Joi.string().trim().optional(),\n    code: Joi.string().optional(),\n    subsidiary: Joi.string().trim().valid(Object.values(SUBSIDIARY)).optional(),\n    level: Joi.number().valid(Object.values(LEVEL)).optional(),\n    master: Joi.string().optional(),\n    prefect: Joi.string().optional(),\n    classroom: Joi.string().optional(),\n    category: Joi.string().optional(),\n    updated_by: Joi.string().required(),\n};\n\nexport const schema = {\n    name: { type: String, required: true, comment: \"title\" },\n    code: { type: String, required: true, unique: true }, // Internal\n    subsidiary: {\n        type: String,\n        enum: Object.values(SUBSIDIARY),\n        required: [false, \"Why no input?\"],\n    },\n    level: {\n        type: Number,\n        enum: Object.values(LEVEL),\n        required: true,\n    },\n    master: { type: ObjectId, ref: \"Staff\", comment: \"Form Teacher\" },\n    prefect: { type: ObjectId, ref: \"Student\", comment: \"Captain\" },\n    classroom: { type: ObjectId, ref: \"Classroom\" },\n    category: { type: ObjectId, ref: \"Category\" },\n    deleted: { type: Boolean, default: false, required: true },\n    deleted_at: { type: Date },\n    created_by: { type: ObjectId, ref: \"Staff\", required: true },\n    updated_by: { type: ObjectId, ref: \"Staff\" },\n};\n\nconst options = DATABASE.OPTIONS;\n\nconst newSchema = new Schema(schema, options);\nnewSchema.set(\"collection\", \"classe\");\n\nconst Classe = mongoose.model(\"Classe\", newSchema);\n\nexport default Classe;\n"]}