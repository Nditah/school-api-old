{"version":3,"sources":["../../../../src/api/general/subject/model.js"],"names":["Schema","mongoose","ObjectId","Types","schemaLogin","email","Joi","string","trim","optional","phone","otp","password","type","valid","schemaCreate","name","hod","description","updated_by","required","schemaUpdate","schema","String","ref","created_by","options","DATABASE","OPTIONS","newSchema","set","Subject","model"],"mappings":";;;;;;;AAYA;;;;AACA;;;;AAEA;;;;IAEQA,M,GAAWC,kB,CAAXD,M;AAHR;AAdA;AACA;;;;;;;;;;;IAiBQE,Q,GAAaF,OAAOG,K,CAApBD,Q;AAED,IAAME,oCAAc;AACvBC,WAAOC,cAAIC,MAAJ,GAAaC,IAAb,GAAoBH,KAApB,GAA4BI,QAA5B,EADgB;AAEvBC,WAAOJ,cAAIC,MAAJ,GAAaE,QAAb,EAFgB;AAGvBE,SAAKL,cAAIC,MAAJ,GAAaE,QAAb,EAHkB;AAIvBG,cAAUN,cAAIC,MAAJ,GAAaE,QAAb,EAJa;AAKvBI,UAAMP,cAAIC,MAAJ,GAAaO,KAAb,CAAmB,CAAC,OAAD,EAAU,OAAV,EAAmB,KAAnB,CAAnB,EAA8CL,QAA9C;AALiB,CAApB;;AAQA,IAAMM,sCAAe;AACxBC,UAAMV,cAAIC,MAAJ,GAAaC,IAAb,GAAoBC,QAApB,EADkB;AAExBQ,SAAKX,cAAIC,MAAJ,GAAaE,QAAb,EAFmB;AAGxBS,iBAAaZ,cAAIC,MAAJ,GAAaC,IAAb,GAAoBC,QAApB,EAHW;AAIxBU,gBAAYb,cAAIC,MAAJ,GAAaa,QAAb;AAJY,CAArB;;AAOA,IAAMC,sCAAe;AACxBL,UAAMV,cAAIC,MAAJ,GAAaC,IAAb,GAAoBC,QAApB,EADkB;AAExBQ,SAAKX,cAAIC,MAAJ,GAAaE,QAAb,EAFmB;AAGxBS,iBAAaZ,cAAIC,MAAJ,GAAaC,IAAb,GAAoBC,QAApB,EAHW;AAIxBU,gBAAYb,cAAIC,MAAJ,GAAaa,QAAb;AAJY,CAArB;;AAOA,IAAME,0BAAS;AAClBN,UAAM,EAAEH,MAAMU,MAAR,EAAgBH,UAAU,CAAC,IAAD,EAAO,cAAP,CAA1B,EADY;AAElBH,SAAK,EAAEJ,MAAMX,QAAR,EAAkBsB,KAAK,OAAvB,EAFa;AAGlBN,iBAAa,EAAEL,MAAMU,MAAR,EAHK;AAIlBE,gBAAY,EAAEZ,MAAMX,QAAR,EAAkBsB,KAAK,OAAvB,EAAgCJ,UAAU,IAA1C,EAJM;AAKlBD,gBAAY,EAAEN,MAAMX,QAAR,EAAkBsB,KAAK,OAAvB,EAAgCJ,UAAU,IAA1C;AALM,CAAf;;AAQP,IAAMM,UAAUC,oBAASC,OAAzB;;AAEA,IAAMC,YAAY,IAAI7B,MAAJ,CAAWsB,MAAX,EAAmBI,OAAnB,CAAlB;AACAG,UAAUC,GAAV,CAAc,YAAd,EAA4B,SAA5B;;AAEA,IAAMC,UAAU9B,mBAAS+B,KAAT,CAAe,SAAf,EAA0BH,SAA1B,CAAhB;;kBAEeE,O","file":"model.js","sourcesContent":["/* eslint-disable import/no-cycle */\r\n/**\r\n * @author 4Decoder\r\n * @property {ObjectId} id Subject ObjectId primaryKey\r\n * @property {String} name Subject name (optional)\r\n * @property {ObjectId} hod Subject hod (optional)\r\n * @property {String} description Subject description (optional)\r\n * @property {ObjectId} created_by Subject record created by\r\n * @property {ObjectId} updated_by Subject record modified by\r\n * @description Subject holds record of all subjects in the school.\r\n */\r\n\r\nimport Joi from \"joi\";\r\nimport mongoose from \"mongoose\";\r\n// eslint-disable-next-line camelcase\r\nimport { DATABASE } from \"../../../constants\";\r\n\r\nconst { Schema } = mongoose;\r\nconst { ObjectId } = Schema.Types;\r\n\r\nexport const schemaLogin = {\r\n    email: Joi.string().trim().email().optional(),\r\n    phone: Joi.string().optional(),\r\n    otp: Joi.string().optional(),\r\n    password: Joi.string().optional(),\r\n    type: Joi.string().valid([\"EMAIL\", \"PHONE\", \"OTP\"]).optional(),\r\n};\r\n\r\nexport const schemaCreate = {\r\n    name: Joi.string().trim().optional(),\r\n    hod: Joi.string().optional(),\r\n    description: Joi.string().trim().optional(),\r\n    updated_by: Joi.string().required(),\r\n};\r\n\r\nexport const schemaUpdate = {\r\n    name: Joi.string().trim().optional(),\r\n    hod: Joi.string().optional(),\r\n    description: Joi.string().trim().optional(),\r\n    updated_by: Joi.string().required(),\r\n};\r\n\r\nexport const schema = {\r\n    name: { type: String, required: [true, \"Why no name?\"] },\r\n    hod: { type: ObjectId, ref: \"Staff\" },\r\n    description: { type: String },\r\n    created_by: { type: ObjectId, ref: \"Staff\", required: true },\r\n    updated_by: { type: ObjectId, ref: \"Staff\", required: true },\r\n};\r\n\r\nconst options = DATABASE.OPTIONS;\r\n\r\nconst newSchema = new Schema(schema, options);\r\nnewSchema.set(\"collection\", \"subject\");\r\n\r\nconst Subject = mongoose.model(\"Subject\", newSchema);\r\n\r\nexport default Subject;\r\n"]}