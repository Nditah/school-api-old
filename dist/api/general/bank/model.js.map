{"version":3,"sources":["../../../../src/api/general/bank/model.js"],"names":["Joi","mongoose","mongoose_csv","DATABASE","table","Staff","Schema","ObjectId","Types","schemaCreate","name","string","trim","required","sort_code","bank_code","country_iso2","optional","contact_person","website","created_by","schemaUpdate","updated_by","schema","type","String","unique","default","ref","preload","PRELOAD_TABLE_DATA","DEFAULT","options","OPTIONS","newSchema","set","plugin","Bank","model","insertMany"],"mappings":"AAAA;AACA;;;;;;;;;;;AAWA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,QAAP,MAAqB,UAArB;AACA;AACA,OAAOC,YAAP,MAAyB,cAAzB;AACA,SAASC,QAAT,QAAyB,oBAAzB;AACA,OAAOC,KAAP,MAAkB,SAAlB;AACA,OAAOC,KAAP,MAAkB,gBAAlB;;AAEA,MAAM,EAAEC,MAAF,KAAaL,QAAnB;AACA,MAAM,EAAEM,QAAF,KAAeD,OAAOE,KAA5B;;AAEA,OAAO,MAAMC,eAAe;AACxBC,UAAMV,IAAIW,MAAJ,GAAaC,IAAb,GAAoBC,QAApB,EADkB;AAExBC,eAAWd,IAAIW,MAAJ,GAAaC,IAAb,GAAoBC,QAApB,EAFa;AAGxBE,eAAWf,IAAIW,MAAJ,GAAaE,QAAb,EAHa;AAIxBG,kBAAchB,IAAIW,MAAJ,GAAaM,QAAb,EAJU;AAKxBC,oBAAgBlB,IAAIW,MAAJ,GAAaM,QAAb,EALQ;AAMxBE,aAASnB,IAAIW,MAAJ,GAAaM,QAAb,EANe;AAOxBG,gBAAYpB,IAAIW,MAAJ,GAAaE,QAAb;AAPY,CAArB;;AAUP,OAAO,MAAMQ,eAAe;AACxBX,UAAMV,IAAIW,MAAJ,GAAaC,IAAb,GAAoBK,QAApB,EADkB;AAExBH,eAAWd,IAAIW,MAAJ,GAAaC,IAAb,GAAoBK,QAApB,EAFa;AAGxBF,eAAWf,IAAIW,MAAJ,GAAaM,QAAb,EAHa;AAIxBD,kBAAchB,IAAIW,MAAJ,GAAaM,QAAb,EAJU;AAKxBC,oBAAgBlB,IAAIW,MAAJ,GAAaM,QAAb,EALQ;AAMxBE,aAASnB,IAAIW,MAAJ,GAAaM,QAAb,EANe;AAOxBK,gBAAYtB,IAAIW,MAAJ,GAAaE,QAAb;AAPY,CAArB;;AAUP,OAAO,MAAMU,SAAS;AAClBb,UAAM,EAAEc,MAAMC,MAAR,EAAgBZ,UAAU,CAAC,IAAD,EAAO,eAAP,CAA1B,EAAmDa,QAAQ,IAA3D,EADY;AAElBZ,eAAW,EAAEU,MAAMC,MAAR,EAAgBZ,UAAU,CAAC,IAAD,EAAO,eAAP,CAA1B,EAFO;AAGlBE,eAAW,EAAES,MAAMC,MAAR,EAAgBZ,UAAU,CAAC,IAAD,EAAO,eAAP,CAA1B,EAHO;AAIlBG,kBAAc,EAAEQ,MAAMC,MAAR,EAAgBZ,UAAU,CAAC,IAAD,EAAO,eAAP,CAA1B,EAAmDc,SAAS,IAA5D,EAJI;AAKlBT,oBAAgB,EAAEM,MAAMC,MAAR,EALE;AAMlBN,aAAS,EAAEK,MAAMC,MAAR,EANS;AAOlBL,gBAAY,EAAEI,MAAMjB,QAAR,EAAkBM,UAAU,IAA5B,EAAkCe,KAAK,OAAvC,EAPM;AAQlBN,gBAAY,EAAEE,MAAMjB,QAAR,EAAkBqB,KAAK,OAAvB;AARM,CAAf;;AAWP,MAAMC,UAAU1B,SAAS2B,kBAAT,CAA4BC,OAA5C;AACA,MAAMC,UAAU7B,SAAS8B,OAAzB;;AAEA,MAAMC,YAAY,IAAI5B,MAAJ,CAAWiB,MAAX,EAAmBS,OAAnB,CAAlB;AACAE,UAAUC,GAAV,CAAc,YAAd,EAA4B,MAA5B;AACAD,UAAUE,MAAV,CAAiBlC,YAAjB;;AAEA,MAAMmC,OAAOpC,SAASqC,KAAT,CAAe,MAAf,EAAuBJ,SAAvB,CAAb;AACA,IAAIL,OAAJ,EAAa;AAAEQ,SAAKE,UAAL,CAAgBnC,KAAhB;AAAyB;;AAExC,eAAeiC,IAAf","file":"model.js","sourcesContent":["/* eslint-disable import/no-cycle */\n/**\n * @author 4Dcoder\n * @property {Number} id bank primaryKey\n * @property {String} name Bank full name (required)\n * @property {String} sort_code Bank sort_code (required)\n * @property {String} bank_code Bank bank_code (required)\n * @property {String} country_iso2 Bank country_iso2 (optional)\n * @property {String} contact_person Bank contact_person (optional)\n * @property {String} website Bank website (optional)\n * @description Bank model holds record of all banks the company deals with\n */\nimport Joi from \"joi\";\nimport mongoose from \"mongoose\";\n// eslint-disable-next-line camelcase\nimport mongoose_csv from \"mongoose-csv\";\nimport { DATABASE } from \"../../../constants\";\nimport table from \"./table\";\nimport Staff from \"../staff/model\";\n\nconst { Schema } = mongoose;\nconst { ObjectId } = Schema.Types;\n\nexport const schemaCreate = {\n    name: Joi.string().trim().required(),\n    sort_code: Joi.string().trim().required(),\n    bank_code: Joi.string().required(),\n    country_iso2: Joi.string().optional(),\n    contact_person: Joi.string().optional(),\n    website: Joi.string().optional(),\n    created_by: Joi.string().required(),\n};\n\nexport const schemaUpdate = {\n    name: Joi.string().trim().optional(),\n    sort_code: Joi.string().trim().optional(),\n    bank_code: Joi.string().optional(),\n    country_iso2: Joi.string().optional(),\n    contact_person: Joi.string().optional(),\n    website: Joi.string().optional(),\n    updated_by: Joi.string().required(),\n};\n\nexport const schema = {\n    name: { type: String, required: [true, \"Why no input?\"], unique: true },\n    sort_code: { type: String, required: [true, \"Why no input?\"] },\n    bank_code: { type: String, required: [true, \"Why no input?\"] },\n    country_iso2: { type: String, required: [true, \"Why no input?\"], default: \"ng\" },\n    contact_person: { type: String },\n    website: { type: String },\n    created_by: { type: ObjectId, required: true, ref: \"Staff\" },\n    updated_by: { type: ObjectId, ref: \"Staff\" },\n};\n\nconst preload = DATABASE.PRELOAD_TABLE_DATA.DEFAULT;\nconst options = DATABASE.OPTIONS;\n\nconst newSchema = new Schema(schema, options);\nnewSchema.set(\"collection\", \"bank\");\nnewSchema.plugin(mongoose_csv);\n\nconst Bank = mongoose.model(\"Bank\", newSchema);\nif (preload) { Bank.insertMany(table); }\n\nexport default Bank;\n"]}