{"version":3,"sources":["../../../../src/api/general/vehicle/model.js"],"names":["Schema","mongoose","ObjectId","Types","VEHICLE_MAKE","VEHICLE","VEHICLE_TYPE","VEHICLE_CATEGORY","VEHICLE_CLASS","VEHICLE_LOCATION","VEHICLE_ASSIGNMENT","VEHICLE_CUSTODIAN","RECORD_STATUS","DATABASE","schemaCreate","name","Joi","string","required","description","optional","engine_number","chasis_number","plate_number","registration_number","vehicle_make","seating_capacity","number","vehicle_type","valid","Object","values","vehicle_class","vehicle_category","vehicle_custodian","EMPLOYEE_TYPE","current_staff_id","current_partner_id","subsidiary","SUBSIDIARY","color","photo","vehicle_location","vehicle_assignment","asset_worthiness","ASSET_WORTHINESS","purchase_date","date","launch_date","expiry_date","lifespan","purchase_value","opening_value","closing_value","salvage_value","current_value","total_depreciable_cost","depreciation_rate","depreciation_expense","accumulated_depreciation","remark","is_dto","boolean","dto_initial_deposit","is_healthy","is_active","created_by","schemaUpdate","record_status","approved_by","approved_date","ownership","updated_by","schema","type","String","Number","enum","default","UNKNOWN","ref","PMT","Date","PENDING","Boolean","dto_maintenance_balance","dto_repayment_total","is_dto_settled","rating_ids","preload","PRELOAD_TABLE_DATA","DEFAULT","options","OPTIONS","newSchema","set","plugin","mongoose_csv","Vehicle","model","insertMany","table"],"mappings":"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","file":"model.js","sourcesContent":["/* eslint-disable import/no-cycle */\r\n/**\r\n * @author 4Decoder\r\n * @property {ObjectId} id Vehicle Object Id primaryKey\r\n * @property {String} name Vehicle name e.g 1450 (required)\r\n * @property {String} description Vehicle description (required)\r\n * @property {String} engine_number Vehicle engine number (optional)\r\n * @property {String} chasis_number Vehicle chasis number  (optional)\r\n * @property {String} plate_number Vehicle plate number  (optional)\r\n * @property {String} registration_number Vehicle registration number  (optional)\r\n * @property {String} vehicle_make Vehicle vehicle_make or manufacturer (optional)\r\n * @property {Number} seating_capacity Vehicle seating capacity  (optional)\r\n * @property {String} vehicle_class Vehicle vehicle class. (required)\r\n * @property {String} vehicle_category Vehicle vehicle_category (required)\r\n * @property {String} vehicle_custodian Vehicle employee type (required)\r\n * @property {ObjectId} current_staff_id Vehicle staff id the vehicle is currenly assigned to\r\n * @property {ObjectId} current_partner_id Vehicle driver id the vehicle is currenly assigned to\r\n * @property {String} subsidiary Vehicle subsidiary (required)\r\n * @property {String} color Vehicle color  (optional)\r\n * @property {String} photo Vehicle photo url (optional)\r\n * @property {String} vehicle_type VEHICLE_TYPE\r\n * @property {String} vehicle_location Vehicle current state or vehicle_location (optional)\r\n * @property {String} vehicle_assignment Vehicle vehicle_assignment status (optional)\r\n * @property {String} asset_worthiness Vehicle asset worthiness (optional)\r\n * @property {Date} purchase_date Vehicle purchase date (optional)\r\n * @property {Date} launch_date Vehicle launch date (optional)\r\n * @property {Date} expiry_date Vehicle expire date (optional)\r\n * @property {Number} lifespan Vehicle lifespan in years (optional)\r\n * @property {Number} purchase_value Vehicle purchase value (optional)\r\n * @property {Number} opening_value Vehicle opening value (optional)\r\n * @property {Number} closing_value Vehicle closing value (optional)\r\n * @property {Number} salvage_value Vehicle salvage value (optional)\r\n * @property {Number} current_value Vehicle current value (optional)\r\n * @property {Number} total_depreciable_cost Vehicle total depreciable cost  (optional)\r\n * @property {Number} depreciation_rate Vehicle depreciation rate  (optional)\r\n * @property {Number} depreciation_expense Vehicle depreciation expense  (optional)\r\n * @property {Number} accumulated_depreciation Vehicle accumulated depreciation  (optional)\r\n * @property {String} record_status Vehicle record approval status (optional)\r\n * @property {ObjectId} approved_by Vehicle approved by staff who veted the record entry (optional)\r\n * @property {Date} approved_date Vehicle approved date after record entry (optional)\r\n * @property {String} remark Vehicle approval remark or any comment about record (optional)\r\n * @property {String} ownership Vehicle ownership current owner \"PMT|PARTNER\" (optional)\r\n * @property {Boolean} is_dto Vehicle is it for Partner-to-Owner scheme (optional)\r\n * @property {Number} dto_initial_deposit Vehicle DTO_INITIAL_DEPOSIT (optional)\r\n * @property {Number} dto_maintenance_balance Vehicle DTO current balance (prohibited)\r\n * @property {Number} dto_repayment_total Vehicle DTO cummulative repayment (prohibited)\r\n * @property {Boolean} is_healthy Vehicle is it healthy  or brokendown (optional)\r\n * @property {Boolean} is_active Vehicle is it active or retired  (optional)\r\n * @description Vehicle holds record of all cities with terminal_list\r\n */\r\nimport Joi from \"joi\";\r\nimport mongoose from \"mongoose\";\r\n// eslint-disable-next-line camelcase\r\nimport mongoose_csv from \"mongoose-csv\";\r\nimport { VEHICLE, SUBSIDIARY, EMPLOYEE_TYPE, ASSET_WORTHINESS, DATABASE } from \"../../../constants\";\r\nimport table from \"./table\";\r\nimport Staff from \"../staff/model\";\r\n\r\nconst { Schema } = mongoose;\r\nconst { ObjectId } = Schema.Types;\r\n\r\nconst {\r\n    VEHICLE_MAKE,\r\n    VEHICLE_TYPE,\r\n    VEHICLE_CATEGORY,\r\n    VEHICLE_CLASS,\r\n    VEHICLE_LOCATION,\r\n    VEHICLE_ASSIGNMENT,\r\n    VEHICLE_CUSTODIAN,\r\n} = VEHICLE;\r\n\r\nconst { RECORD_STATUS } = DATABASE;\r\n\r\nexport const schemaCreate = {\r\n    name: Joi.string().required(),\r\n    description: Joi.string().optional(),\r\n    engine_number: Joi.string().optional(),\r\n    chasis_number: Joi.string().optional(),\r\n    plate_number: Joi.string().optional(),\r\n    registration_number: Joi.string().optional(),\r\n    vehicle_make: Joi.string().optional(),\r\n    seating_capacity: Joi.number().optional(),\r\n    vehicle_type: Joi.string().valid(Object.values(VEHICLE_TYPE)).optional(),\r\n    vehicle_class: Joi.string().valid(Object.values(VEHICLE_CLASS)).required(),\r\n    vehicle_category: Joi.string().valid(Object.values(VEHICLE_CATEGORY)).required(),\r\n    vehicle_custodian: Joi.string().valid(Object.values(EMPLOYEE_TYPE)).optional(),\r\n    current_staff_id: Joi.string().optional(),\r\n    current_partner_id: Joi.string().optional(),\r\n    subsidiary: Joi.string().valid(Object.values(SUBSIDIARY)).required(),\r\n    color: Joi.string().optional(),\r\n    photo: Joi.string().optional(),\r\n    vehicle_location: Joi.string().valid(Object.values(VEHICLE_LOCATION)).optional(),\r\n    vehicle_assignment: Joi.string().valid(Object.values(VEHICLE_ASSIGNMENT)).optional(),\r\n    asset_worthiness: Joi.string().valid(Object.values(ASSET_WORTHINESS)).optional(),\r\n    purchase_date: Joi.date().optional(),\r\n    launch_date: Joi.date().optional(),\r\n    expiry_date: Joi.date().optional(),\r\n    lifespan: Joi.number().optional(),\r\n    purchase_value: Joi.number().optional(),\r\n    opening_value: Joi.number().optional(),\r\n    closing_value: Joi.number().optional(),\r\n    salvage_value: Joi.number().optional(),\r\n    current_value: Joi.number().optional(),\r\n    total_depreciable_cost: Joi.number().optional(),\r\n    depreciation_rate: Joi.number().optional(),\r\n    depreciation_expense: Joi.number().optional(),\r\n    accumulated_depreciation: Joi.number().optional(),\r\n    remark: Joi.string().optional(),\r\n    is_dto: Joi.boolean().required(),\r\n    dto_initial_deposit: Joi.string().optional(),\r\n    is_healthy: Joi.boolean().optional(),\r\n    is_active: Joi.boolean().optional(),\r\n    created_by: Joi.string().required(),\r\n};\r\n\r\nexport const schemaUpdate = {\r\n    name: Joi.string().optional(),\r\n    description: Joi.string().optional(),\r\n    engine_number: Joi.string().optional(),\r\n    chasis_number: Joi.string().optional(),\r\n    plate_number: Joi.string().optional(),\r\n    registration_number: Joi.string().optional(),\r\n    vehicle_make: Joi.string().optional(),\r\n    seating_capacity: Joi.number().optional(),\r\n    vehicle_type: Joi.string().valid(Object.values(VEHICLE_TYPE)).optional(),\r\n    vehicle_class: Joi.string().valid(Object.values(VEHICLE_CLASS)).optional(),\r\n    vehicle_category: Joi.string().valid(Object.values(VEHICLE_CATEGORY)).optional(),\r\n    vehicle_custodian: Joi.string().valid(Object.values(EMPLOYEE_TYPE)).optional(),\r\n    current_staff_id: Joi.string().optional(),\r\n    current_partner_id: Joi.string().optional(),\r\n    subsidiary: Joi.string().valid(Object.values(SUBSIDIARY)).optional(),\r\n    color: Joi.string().optional(),\r\n    photo: Joi.string().optional(),\r\n    vehicle_location: Joi.string().valid(Object.values(VEHICLE_LOCATION)).optional(),\r\n    vehicle_assignment: Joi.string().valid(Object.values(VEHICLE_ASSIGNMENT)).optional(),\r\n    asset_worthiness: Joi.string().valid(Object.values(ASSET_WORTHINESS)).optional(),\r\n    purchase_date: Joi.date().optional(),\r\n    launch_date: Joi.date().optional(),\r\n    expiry_date: Joi.date().optional(),\r\n    lifespan: Joi.number().optional(),\r\n    purchase_value: Joi.number().optional(),\r\n    opening_value: Joi.number().optional(),\r\n    closing_value: Joi.number().optional(),\r\n    salvage_value: Joi.number().optional(),\r\n    current_value: Joi.number().optional(),\r\n    total_depreciable_cost: Joi.number().optional(),\r\n    depreciation_rate: Joi.number().optional(),\r\n    depreciation_expense: Joi.number().optional(),\r\n    accumulated_depreciation: Joi.number().optional(),\r\n    record_status: Joi.string().optional(),\r\n    approved_by: Joi.string().optional(),\r\n    approved_date: Joi.date().optional(),\r\n    remark: Joi.string().optional(),\r\n    ownership: Joi.string().optional(),\r\n    is_dto: Joi.boolean().optional(),\r\n    dto_initial_deposit: Joi.string().optional(),\r\n    is_healthy: Joi.boolean().optional(),\r\n    is_active: Joi.boolean().optional(),\r\n    updated_by: Joi.string().required(),\r\n};\r\n\r\nexport const schema = {\r\n    name: { type: String, required: [true, \"Why no input?\"] },\r\n    description: { type: String },\r\n    engine_number: { type: String },\r\n    chasis_number: { type: String },\r\n    plate_number: { type: String },\r\n    registration_number: { type: String }, // local authority regno\r\n    seating_capacity: { type: Number },\r\n    vehicle_type: {\r\n        type: String,\r\n        enum: Object.values(VEHICLE_TYPE),\r\n        default: VEHICLE_TYPE.UNKNOWN,\r\n        required: [true, \"Why no vehicle type?\"],\r\n    },\r\n    vehicle_make: {\r\n        type: String,\r\n        enum: Object.values(VEHICLE_MAKE),\r\n        default: VEHICLE_MAKE.UNKNOWN,\r\n        required: [true, \"Why no vehicle make?\"],\r\n    },\r\n    vehicle_class: {\r\n        type: String,\r\n        enum: Object.values(VEHICLE_CLASS),\r\n        default: VEHICLE_CLASS.UNKNOWN,\r\n        required: [true, \"Why no input?\"],\r\n    },\r\n    vehicle_category: {\r\n        type: String,\r\n        enum: Object.values(VEHICLE_CATEGORY),\r\n        default: VEHICLE_CATEGORY.UNKNOWN,\r\n        required: [true, \"Why no input?\"],\r\n    },\r\n    vehicle_custodian: {\r\n        type: String,\r\n        enum: Object.values(VEHICLE_CUSTODIAN),\r\n        default: VEHICLE_CUSTODIAN.UNKNOWN,\r\n        required: [true, \"Why no vehicle_custodian?\"],\r\n    },\r\n    current_staff_id: { type: ObjectId, ref: \"Staff\" },\r\n    current_partner_id: { type: ObjectId, ref: \"Partner\" },\r\n    subsidiary: {\r\n        type: String,\r\n        enum: Object.values(SUBSIDIARY),\r\n        default: SUBSIDIARY.PMT,\r\n        required: [true, \"Why no input?\"],\r\n    },\r\n    vehicle_location: {\r\n        type: String,\r\n        enum: Object.values(VEHICLE_LOCATION),\r\n        default: VEHICLE_LOCATION.UNKNOWN,\r\n        required: [true, \"Why no input?\"],\r\n    },\r\n    vehicle_assignment: {\r\n        type: String,\r\n        enum: Object.values(VEHICLE_ASSIGNMENT),\r\n        default: VEHICLE_ASSIGNMENT.UNKNOWN,\r\n        required: [true, \"Why no input?\"],\r\n    },\r\n    asset_worthiness: {\r\n        type: String,\r\n        enum: Object.values(ASSET_WORTHINESS),\r\n        default: ASSET_WORTHINESS.UNKNOWN,\r\n        required: [true, \"Why no input?\"],\r\n    },\r\n    color: { type: String },\r\n    photo: { type: String },\r\n    purchase_date: { type: Date },\r\n    launch_date: { type: Date },\r\n    expiry_date: { type: Date },\r\n    lifespan: { type: Number },\r\n    purchase_value: { type: Number },\r\n    opening_value: { type: Number },\r\n    closing_value: { type: Number },\r\n    salvage_value: { type: Number },\r\n    current_value: { type: Number },\r\n    total_depreciable_cost: { type: Number },\r\n    depreciation_rate: { type: Number },\r\n    depreciation_expense: { type: Number },\r\n    accumulated_depreciation: { type: Number },\r\n    record_status: {\r\n        type: String,\r\n        enum: Object.values(RECORD_STATUS),\r\n        default: RECORD_STATUS.PENDING,\r\n        required: true,\r\n    },\r\n    approved_by: { type: ObjectId, ref: \"Staff\" },\r\n    approved_date: { type: Date },\r\n    remark: { type: String },\r\n    ownership: {\r\n        type: String,\r\n        enum: [\"PMT\", \"PARTNER\"],\r\n        default: \"PMT\",\r\n        required: true,\r\n    },\r\n    is_dto: { type: Boolean, default: false, required: [true, \"Why no input?\"] },\r\n    dto_initial_deposit: { type: Number, default: 0.0 },\r\n    dto_maintenance_balance: { type: Number, default: 0.0 },\r\n    dto_repayment_total: { type: Number, default: 0.0 },\r\n    is_dto_settled: { type: Boolean, default: false, required: [true, \"Why no input?\"] },\r\n    is_healthy: { type: Boolean, default: false, required: [true, \"Why no input?\"] },\r\n    is_active: { type: Boolean, default: false, required: [true, \"Why no input?\"] },\r\n    rating_ids: [{ type: ObjectId, ref: \"Rating\" }],\r\n    created_by: { type: ObjectId, required: true, ref: \"Staff\" },\r\n    updated_by: { type: ObjectId, ref: \"Staff\" },\r\n};\r\n\r\nconst preload = DATABASE.PRELOAD_TABLE_DATA.DEFAULT;\r\nconst options = DATABASE.OPTIONS;\r\n\r\nconst newSchema = new Schema(schema, options);\r\nnewSchema.set(\"collection\", \"vehicle\");\r\nnewSchema.plugin(mongoose_csv);\r\n\r\nconst Vehicle = mongoose.model(\"Vehicle\", newSchema);\r\nif (preload) { Vehicle.insertMany(table); }\r\n\r\nexport default Vehicle;\r\n"]}