{"version":3,"sources":["../../../../src/api/general/offence/model.js"],"names":["Schema","mongoose","ObjectId","Types","schemaCreate","offender_type","Joi","string","required","staff_id","partner_id","optional","offence","offence_date","date","description","offence_status","valid","verdict","verdict_by","verdict_date","verdict_remark","fine","number","discipline","suspension","payment","created_by","schemaUpdate","updated_by","schema","type","String","enum","comment","ref","Date","Number","preload","DATABASE","PRELOAD_TABLE_DATA","DEFAULT","options","OPTIONS","newSchema","set","Offence","model","insertMany","table"],"mappings":"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","file":"model.js","sourcesContent":["/**\r\n * @author 4Dcoder\r\n * @property {String} offender_type Offence offender_type (required)\r\n * @property {ObjectId} staff_id Offence staff ObjectId\r\n * @property {ObjectId} partner_id Offence driver ObjectId\r\n * @property {String} offence Offence offence (optional)\r\n * @property {Date} offence_date Offence offence_date (optional)\r\n * @property {String} description Offence description (optional)\r\n * @property {String} offence_status Offence offence_status (\"PENDING\", \"ARBITRATED\")\r\n * @property {String} verdict Offence verdict (\"INNOCENT\", \"GUILTY\")\r\n * @property {ObjectId} verdict_by Offence verdict_by (optional)\r\n * @property {Date} verdict_date Offence verdict_date (optional)\r\n * @property {String} verdict_remark Offence verdict_remark (optional)\r\n * @property {Number} fine Offence fine (required)\r\n * @property {String} discipline Offence discipline (\"WARNING\", \"SUSPENSION\", \"DISMISSED\")\r\n * @property {String} suspension Offence suspension (optional)\r\n * @property {Number} payment Offence paymentId (required)\r\n * @description Offence model holds record of all Inventories except vehicles\r\n */\r\nimport Joi from \"joi\";\r\nimport mongoose from \"mongoose\";\r\n// eslint-disable-next-line camelcase\r\nimport mongoose_csv from \"mongoose-csv\";\r\nimport { DATABASE } from \"../../../constants\";\r\nimport table from \"./table\";\r\nimport Staff from \"../staff/model\";\r\n\r\nconst { Schema } = mongoose;\r\nconst { ObjectId } = Schema.Types;\r\n\r\nexport const schemaCreate = {\r\n    offender_type: Joi.string().required(),\r\n    staff_id: Joi.string().required(),\r\n    partner_id: Joi.string().optional(),\r\n    offence: Joi.string().optional(),\r\n    offence_date: Joi.date().optional(),\r\n    description: Joi.string().optional(),\r\n    offence_status: Joi.string().valid(\"PENDING\", \"ARBITRATED\").optional(),\r\n    verdict: Joi.string().valid(\"INNOCENT\", \"GUILTY\").optional(),\r\n    verdict_by: Joi.string().optional(),\r\n    verdict_date: Joi.date().optional(),\r\n    verdict_remark: Joi.string().optional(),\r\n    fine: Joi.number().optional(),\r\n    discipline: Joi.string().valid(\"WARNING\", \"SUSPENSION\", \"DISMISSED\").required(),\r\n    suspension: Joi.string().optional(),\r\n    payment: Joi.string().optional(),\r\n    created_by: Joi.string().required(),\r\n};\r\n\r\nexport const schemaUpdate = {\r\n    offender_type: Joi.string().optional(),\r\n    staff_id: Joi.string().optional(),\r\n    partner_id: Joi.string().optional(),\r\n    offence: Joi.string().optional(),\r\n    offence_date: Joi.date().optional(),\r\n    description: Joi.string().optional(),\r\n    offence_status: Joi.string().valid(\"PENDING\", \"ARBITRATED\").optional(),\r\n    verdict: Joi.string().valid(\"INNOCENT\", \"GUILTY\").optional(),\r\n    verdict_by: Joi.string().optional(),\r\n    verdict_date: Joi.date().optional(),\r\n    verdict_remark: Joi.string().optional(),\r\n    fine: Joi.number().optional(),\r\n    discipline: Joi.string().valid(\"WARNING\", \"SUSPENSION\", \"DISMISSED\").optional(),\r\n    suspension: Joi.string().optional(),\r\n    payment: Joi.string().optional(),\r\n    updated_by: Joi.string().required(),\r\n};\r\n\r\nexport const schema = {\r\n    offender_type: { type: String, enum: [\"PARTNER\", \"STAFF\"], comment: \"userType\" },\r\n    staff_id: { type: ObjectId, ref: \"Staff\" },\r\n    partner_id: { type: ObjectId, ref: \"Partner\" },\r\n    offence: { type: String },\r\n    offence_date: { type: Date },\r\n    description: { type: String },\r\n    offence_status: { type: String, enum: [\"PENDING\", \"ARBITRATED\"] },\r\n    verdict: { type: String, enum: [\"INNOCENT\", \"GUILTY\"] },\r\n    verdict_by: { type: ObjectId, ref: \"Staff\" },\r\n    verdict_date: { type: Date },\r\n    verdict_remark: { type: String },\r\n    fine: { type: Number },\r\n    discipline: { type: String, enum: [\"WARNING\", \"SUSPENSION\", \"DISMISSED\"] },\r\n    suspension: { type: String },\r\n    payment: { type: String },\r\n    created_by: { type: ObjectId, ref: \"Staff\", required: true },\r\n    updated_by: { type: ObjectId, ref: \"Staff\" },\r\n};\r\n\r\nconst preload = DATABASE.PRELOAD_TABLE_DATA.DEFAULT;\r\nconst options = DATABASE.OPTIONS;\r\n\r\nconst newSchema = new Schema(schema, options);\r\nnewSchema.set(\"collection\", \"offence\");\r\n\r\nconst Offence = mongoose.model(\"Offence\", newSchema);\r\n\r\nif (preload) { Offence.insertMany(table); }\r\n\r\nexport default Offence;\r\n"]}