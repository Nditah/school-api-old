{"version":3,"sources":["../../../../src/api/general/budget/model.js"],"names":["Joi","mongoose","mongoose_csv","DATABASE","SUBSIDIARY","Staff","Office","AccountHeading","Schema","ObjectId","Types","schemaCreate","name","string","optional","description","type","trim","valid","subsidiary","Object","values","year","number","amount","office","terminal","account_heading","created_by","required","schemaUpdate","updated_by","schema","String","enum","Number","ref","options","OPTIONS","newSchema","set","Budget","model"],"mappings":"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","file":"model.js","sourcesContent":["/**\n * @author 4Dcoder\n * @property {ObjectId} id Budget primaryKey\n * @property {String} name Budget name (required)\n * @property {String} type Budget Category ACCOUNT|OFFICE|SUBSIDIARY|TERMINAL\n * @property {String} description Budget description (required)\n * @property {String} subsidiary Budget PET|CHEM|PLANT|ENGR (required)\n * @property {Number} year Budget year e.g. 2020 Period is gotten from settings\n * @property {Number} amount Budget cap set for the given year\n * @property {ObjectId} office Budget for a given office\n * @property {ObjectId} terminal Budget Terminal\n * @property {ObjectId} account_heading Budget AccountHeading\n * @description Budget model holds records of the expenditure limit for a year\n */\nimport Joi from \"joi\";\nimport mongoose from \"mongoose\";\n// eslint-disable-next-line camelcase\nimport mongoose_csv from \"mongoose-csv\";\nimport { DATABASE, SUBSIDIARY } from \"../../../constants\";\n// eslint-disable-next-line import/no-cycle\nimport Staff from \"../staff/model\";\nimport Office from \"../office/model\";\nimport AccountHeading from \"../account-heading/model\";\n\nconst { Schema } = mongoose;\nconst { ObjectId } = Schema.Types;\n\nexport const schemaCreate = {\n    name: Joi.string().optional(),\n    description: Joi.string().optional(),\n    type: Joi.string().trim().valid([\"ACCOUNT\", \"OFFICE\", \"SUBSIDIARY\", \"TERMINAL\"]).optional(),\n    subsidiary: Joi.string().valid(Object.values(SUBSIDIARY)).optional(),\n    year: Joi.number().optional(),\n    amount: Joi.number().optional(),\n    office: Joi.string().optional(),\n    terminal: Joi.string().optional(),\n    account_heading: Joi.string().optional(),\n    created_by: Joi.string().required(),\n};\n\nexport const schemaUpdate = {\n    name: Joi.string().optional(),\n    description: Joi.string().optional(),\n    type: Joi.string().trim().valid([\"ACCOUNT\", \"OFFICE\", \"SUBSIDIARY\", \"TERMINAL\"]).optional(),\n    subsidiary: Joi.string().valid(Object.values(SUBSIDIARY)).optional(),\n    year: Joi.number().optional(),\n    amount: Joi.number().optional(),\n    office: Joi.string().optional(),\n    terminal: Joi.string().optional(),\n    account_heading: Joi.string().optional(),\n    updated_by: Joi.string().required(),\n};\n\nexport const schema = {\n    name: { type: String, required: true },\n    type: { type: String, enum: [\"ACCOUNT\", \"OFFICE\", \"SUBSIDIARY\", \"TERMINAL\"], required: true },\n    description: { type: String, required: true },\n    year: { type: Number, required: true },\n    amount: { type: Number, required: true },\n    subsidiary: {\n        type: String,\n        enum: Object.values(SUBSIDIARY),\n        required: true,\n    },\n    terminal: { type: ObjectId, ref: \"Terminal\" },\n    office: { type: ObjectId, ref: \"Office\" },\n    account_heading: { type: ObjectId, ref: \"AccountHeading\", required: true },\n    created_by: { type: ObjectId, ref: \"Staff\", required: true },\n    updated_by: { type: ObjectId, ref: \"Staff\" },\n};\n\nconst options = DATABASE.OPTIONS;\n\nconst newSchema = new Schema(schema, options);\nnewSchema.set(\"collection\", \"budget\");\n\nconst Budget = mongoose.model(\"Budget\", newSchema);\n\nexport default Budget;\n"]}