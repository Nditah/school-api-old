{"version":3,"sources":["../../../../src/api/general/table/model.js"],"names":["Joi","mongoose","mongoose_csv","DATABASE","table","Staff","Schema","ObjectId","Types","schemaCreate","label","string","optional","name","url","pullable","boolean","pushable","changes","description","created_by","required","schemaUpdate","updated_by","schema","type","String","Boolean","default","ref","preload","PRELOAD_TABLE_DATA","DEFAULT","options","OPTIONS","newSchema","set","plugin","Table","model","insertMany"],"mappings":"AAAA;AACA;;;;;;;;;;;;;;AAcA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,QAAP,MAAqB,UAArB;AACA;AACA,OAAOC,YAAP,MAAyB,cAAzB;AACA,SAASC,QAAT,QAAyB,oBAAzB;AACA,OAAOC,KAAP,MAAkB,SAAlB;AACA,OAAOC,KAAP,MAAkB,gBAAlB;;AAEA,MAAM,EAAEC,MAAF,KAAaL,QAAnB;AACA,MAAM,EAAEM,QAAF,KAAeD,OAAOE,KAA5B;;AAEA,OAAO,MAAMC,eAAe;AACxBC,WAAOV,IAAIW,MAAJ,GAAaC,QAAb,EADiB;AAExBC,UAAMb,IAAIW,MAAJ,GAAaC,QAAb,EAFkB;AAGxBE,SAAKd,IAAIW,MAAJ,GAAaC,QAAb,EAHmB;AAIxBG,cAAUf,IAAIgB,OAAJ,GAAcJ,QAAd,EAJc;AAKxBK,cAAUjB,IAAIgB,OAAJ,GAAcJ,QAAd,EALc;AAMxBM,aAASlB,IAAIgB,OAAJ,GAAcJ,QAAd,EANe;AAOxBO,iBAAanB,IAAIW,MAAJ,GAAaC,QAAb,EAPW;AAQxBQ,gBAAYpB,IAAIW,MAAJ,GAAaU,QAAb;AARY,CAArB;;AAWP,OAAO,MAAMC,eAAe;AACxBZ,WAAOV,IAAIW,MAAJ,GAAaC,QAAb,EADiB;AAExBC,UAAMb,IAAIW,MAAJ,GAAaC,QAAb,EAFkB;AAGxBE,SAAKd,IAAIW,MAAJ,GAAaC,QAAb,EAHmB;AAIxBG,cAAUf,IAAIgB,OAAJ,GAAcJ,QAAd,EAJc;AAKxBK,cAAUjB,IAAIgB,OAAJ,GAAcJ,QAAd,EALc;AAMxBM,aAASlB,IAAIgB,OAAJ,GAAcJ,QAAd,EANe;AAOxBO,iBAAanB,IAAIW,MAAJ,GAAaC,QAAb,EAPW;AAQxBW,gBAAYvB,IAAIW,MAAJ,GAAaU,QAAb;AARY,CAArB;;AAWP,OAAO,MAAMG,SAAS;AAClBd,WAAO,EAAEe,MAAMC,MAAR,EADW;AAElBb,UAAM,EAAEY,MAAMC,MAAR,EAAgBL,UAAU,IAA1B,EAFY;AAGlBP,SAAK,EAAEW,MAAMC,MAAR,EAAgBL,UAAU,IAA1B,EAHa;AAIlBN,cAAU,EAAEU,MAAME,OAAR,EAAiBC,SAAS,KAA1B,EAJQ;AAKlBX,cAAU,EAAEQ,MAAME,OAAR,EAAiBC,SAAS,KAA1B,EALQ;AAMlBV,aAAS,EAAEO,MAAME,OAAR,EAAiBC,SAAS,KAA1B,EANS,EAM0B;AAC5CT,iBAAa,EAAEM,MAAMC,MAAR,EAPK;AAQlBN,gBAAY,EAAEK,MAAMlB,QAAR,EAAkBsB,KAAK,OAAvB,EAAgCR,UAAU,IAA1C,EARM;AASlBE,gBAAY,EAAEE,MAAMlB,QAAR;AATM,CAAf;;AAYP,MAAMuB,UAAU3B,SAAS4B,kBAAT,CAA4BC,OAA5C;AACA,MAAMC,UAAU9B,SAAS+B,OAAzB;;AAEA,MAAMC,YAAY,IAAI7B,MAAJ,CAAWkB,MAAX,EAAmBS,OAAnB,CAAlB;AACAE,UAAUC,GAAV,CAAc,YAAd,EAA4B,OAA5B;AACAD,UAAUE,MAAV,CAAiBnC,YAAjB;;AAEA,MAAMoC,QAAQrC,SAASsC,KAAT,CAAe,OAAf,EAAwBJ,SAAxB,CAAd;;AAEA,IAAIL,OAAJ,EAAa;AAAEQ,UAAME,UAAN,CAAiBpC,KAAjB;AAA0B;;AAEzC,eAAekC,KAAf","file":"model.js","sourcesContent":["/* eslint-disable import/no-cycle */\n/**\n * @author 4Decoder\n * @property {ObjectId} id Table primaryKey\n * @property {String} label Table label or table title,\n * @property {String} name Table name i.e. db collection(required),\n * @property {String} url Table url segment /api/{url} (required),\n * @property {Boolean} pullable Table pullable i.e. collection can be downloaded\n * @property {Boolean} pushable Table pushable i.e. collection can be uploaded\n * @property {Boolean} changes Table changes if there are changes to be synchronized\n * @property {String} description Table description about operation status or feedback\n * @property {ObjectId} created_by Table record created by\n * @property {ObjectId} updated_by Table record modified by\n * @description Table holds record of all cities with table_list\n */\nimport Joi from \"joi\";\nimport mongoose from \"mongoose\";\n// eslint-disable-next-line camelcase\nimport mongoose_csv from \"mongoose-csv\";\nimport { DATABASE } from \"../../../constants\";\nimport table from \"./table\";\nimport Staff from \"../staff/model\";\n\nconst { Schema } = mongoose;\nconst { ObjectId } = Schema.Types;\n\nexport const schemaCreate = {\n    label: Joi.string().optional(),\n    name: Joi.string().optional(),\n    url: Joi.string().optional(),\n    pullable: Joi.boolean().optional(),\n    pushable: Joi.boolean().optional(),\n    changes: Joi.boolean().optional(),\n    description: Joi.string().optional(),\n    created_by: Joi.string().required(),\n};\n\nexport const schemaUpdate = {\n    label: Joi.string().optional(),\n    name: Joi.string().optional(),\n    url: Joi.string().optional(),\n    pullable: Joi.boolean().optional(),\n    pushable: Joi.boolean().optional(),\n    changes: Joi.boolean().optional(),\n    description: Joi.string().optional(),\n    updated_by: Joi.string().required(),\n};\n\nexport const schema = {\n    label: { type: String },\n    name: { type: String, required: true },\n    url: { type: String, required: true },\n    pullable: { type: Boolean, default: false },\n    pushable: { type: Boolean, default: false },\n    changes: { type: Boolean, default: false }, // Are there changes\n    description: { type: String },\n    created_by: { type: ObjectId, ref: \"Staff\", required: true },\n    updated_by: { type: ObjectId },\n};\n\nconst preload = DATABASE.PRELOAD_TABLE_DATA.DEFAULT;\nconst options = DATABASE.OPTIONS;\n\nconst newSchema = new Schema(schema, options);\nnewSchema.set(\"collection\", \"table\");\nnewSchema.plugin(mongoose_csv);\n\nconst Table = mongoose.model(\"table\", newSchema);\n\nif (preload) { Table.insertMany(table); }\n\nexport default Table;\n"]}