{"version":3,"sources":["../../../../src/api/general/state/model.js"],"names":["Joi","mongoose","mongoose_csv","DATABASE","table","Staff","Schema","ObjectId","Types","schemaCreate","name","string","trim","required","country_iso2","max","created_by","schemaUpdate","optional","updated_by","schema","type","String","ref","preload","PRELOAD_TABLE_DATA","DEFAULT","options","OPTIONS","newSchema","set","plugin","State","model","insertMany"],"mappings":"AAAA;AACA;;;;;;;;;;AAUA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,QAAP,MAAqB,UAArB;AACA;AACA,OAAOC,YAAP,MAAyB,cAAzB;AACA,SAASC,QAAT,QAAyB,oBAAzB;AACA,OAAOC,KAAP,MAAkB,SAAlB;AACA,OAAOC,KAAP,MAAkB,gBAAlB;;AAEA,MAAM,EAAEC,MAAF,KAAaL,QAAnB;AACA,MAAM,EAAEM,QAAF,KAAeD,OAAOE,KAA5B;;AAEA,OAAO,MAAMC,eAAe;AACxBC,UAAMV,IAAIW,MAAJ,GAAaC,IAAb,GAAoBC,QAApB,EADkB;AAExBC,kBAAcd,IAAIW,MAAJ,GAAaC,IAAb,GAAoBG,GAApB,CAAwB,CAAxB,EAA2BF,QAA3B,EAFU;AAGxBG,gBAAYhB,IAAIW,MAAJ,GAAaE,QAAb;AAHY,CAArB;;AAMP,OAAO,MAAMI,eAAe;AACxBP,UAAMV,IAAIW,MAAJ,GAAaC,IAAb,GAAoBM,QAApB,EADkB;AAExBJ,kBAAcd,IAAIW,MAAJ,GAAaC,IAAb,GAAoBG,GAApB,CAAwB,CAAxB,EAA2BG,QAA3B,EAFU;AAGxBC,gBAAYnB,IAAIW,MAAJ,GAAaE,QAAb;AAHY,CAArB;;AAMP,OAAO,MAAMO,SAAS;AAClBV,UAAM,EAAEW,MAAMC,MAAR,EAAgBT,UAAU,IAA1B,EADY;AAElBC,kBAAc,EAAEO,MAAMC,MAAR,EAAgBT,UAAU,IAA1B,EAFI;AAGlBG,gBAAY,EAAEK,MAAMd,QAAR,EAAkBgB,KAAK,OAAvB,EAAgCV,UAAU,IAA1C,EAHM;AAIlBM,gBAAY,EAAEE,MAAMd,QAAR,EAAkBgB,KAAK,OAAvB;AAJM,CAAf;;AAOP,MAAMC,UAAUrB,SAASsB,kBAAT,CAA4BC,OAA5C;AACA,MAAMC,UAAUxB,SAASyB,OAAzB;;AAEA,MAAMC,YAAY,IAAIvB,MAAJ,CAAWc,MAAX,EAAmBO,OAAnB,CAAlB;AACAE,UAAUC,GAAV,CAAc,YAAd,EAA4B,OAA5B;AACAD,UAAUE,MAAV,CAAiB7B,YAAjB;;AAEA,MAAM8B,QAAQ/B,SAASgC,KAAT,CAAe,OAAf,EAAwBJ,SAAxB,CAAd;;AAEA,IAAIL,OAAJ,EAAa;AAAEQ,UAAME,UAAN,CAAiB9B,KAAjB;AAA0B;;AAEzC,eAAe4B,KAAf","file":"model.js","sourcesContent":["/* eslint-disable import/no-cycle */\n/**\n * @author 4Decoder\n * @property {ObjectId} id State primaryKey\n * @property {String} name State name\n * @property {Number} hub_id State Hub id\n * @property {String} country_iso2 The Country where the state is located\n * @property {ObjectId} created_by State record created by\n * @property {ObjectId} updated_by State record modified by\n * @description State holds record of all cities with terminal_list\n */\nimport Joi from \"joi\";\nimport mongoose from \"mongoose\";\n// eslint-disable-next-line camelcase\nimport mongoose_csv from \"mongoose-csv\";\nimport { DATABASE } from \"../../../constants\";\nimport table from \"./table\";\nimport Staff from \"../staff/model\";\n\nconst { Schema } = mongoose;\nconst { ObjectId } = Schema.Types;\n\nexport const schemaCreate = {\n    name: Joi.string().trim().required(),\n    country_iso2: Joi.string().trim().max(2).required(),\n    created_by: Joi.string().required(),\n};\n\nexport const schemaUpdate = {\n    name: Joi.string().trim().optional(),\n    country_iso2: Joi.string().trim().max(2).optional(),\n    updated_by: Joi.string().required(),\n};\n\nexport const schema = {\n    name: { type: String, required: true },\n    country_iso2: { type: String, required: true },\n    created_by: { type: ObjectId, ref: \"Staff\", required: true },\n    updated_by: { type: ObjectId, ref: \"Staff\" },\n};\n\nconst preload = DATABASE.PRELOAD_TABLE_DATA.DEFAULT;\nconst options = DATABASE.OPTIONS;\n\nconst newSchema = new Schema(schema, options);\nnewSchema.set(\"collection\", \"state\");\nnewSchema.plugin(mongoose_csv);\n\nconst State = mongoose.model(\"State\", newSchema);\n\nif (preload) { State.insertMany(table); }\n\nexport default State;\n"]}