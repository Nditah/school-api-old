{"version":3,"sources":["../../../../src/api/general/setting/model.js"],"names":["Joi","mongoose","mongoose_csv","DATABASE","table","Staff","Schema","ObjectId","Types","schemaFetch","names","string","optional","fields","schemaUpdate","name","trim","access","valid","value","category","description","updated_by","required","schema","type","String","uppercase","unique","enum","ref","preload","PRELOAD_TABLE_DATA","DEFAULT","options","OPTIONS","newSchema","index","set","plugin","Setting","model","insertMany"],"mappings":"AAAA;;;;;;;;;;AAUA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,QAAP,MAAqB,UAArB;AACA;AACA,OAAOC,YAAP,MAAyB,cAAzB;AACA,SAASC,QAAT,QAAyB,oBAAzB;AACA,OAAOC,KAAP,MAAkB,SAAlB;AACA,OAAOC,KAAP,MAAkB,gBAAlB;;AAEA,MAAM,EAAEC,MAAF,KAAaL,QAAnB;AACA,MAAM,EAAEM,QAAF,KAAeD,OAAOE,KAA5B;;AAEA,OAAO,MAAMC,cAAc;AACvBC,WAAOV,IAAIW,MAAJ,GAAaC,QAAb,EADgB;AAEvBC,YAAQb,IAAIW,MAAJ,GAAaC,QAAb;AAFe,CAApB;;AAKP,OAAO,MAAME,eAAe;AACxBC,UAAMf,IAAIW,MAAJ,GAAaK,IAAb,GAAoBJ,QAApB,EADkB;AAExBK,YAAQjB,IAAIW,MAAJ,GAAaK,IAAb,GAAoBE,KAApB,CAA0B,QAA1B,EAAoC,SAApC,EAA+CN,QAA/C,EAFgB;AAGxBO,WAAOnB,IAAIW,MAAJ,GAAaK,IAAb,GAAoBJ,QAApB,EAHiB;AAIxBQ,cAAUpB,IAAIW,MAAJ,GAAaC,QAAb,EAJc;AAKxBS,iBAAarB,IAAIW,MAAJ,GAAaC,QAAb,EALW;AAMxBU,gBAAYtB,IAAIW,MAAJ,GAAaY,QAAb;AANY,CAArB;;AASP,OAAO,MAAMC,SAAS;AAClBT,UAAM;AACFU,cAAMC,MADJ;AAEFC,mBAAW,IAFT;AAGFC,gBAAQ,IAHN;AAIFL,kBAAU,CAAC,IAAD,EAAO,cAAP;AAJR,KADY;AAOlBN,YAAQ,EAAEQ,MAAMC,MAAR,EAAgBG,MAAM,CAAC,QAAD,EAAW,SAAX,CAAtB,EAA6CN,UAAU,CAAC,IAAD,EAAO,gBAAP,CAAvD,EAPU;AAQlBJ,WAAO,EAAEM,MAAMC,MAAR,EAAgBH,UAAU,CAAC,IAAD,EAAO,eAAP,CAA1B,EARW;AASlBH,cAAU,EAAEK,MAAMC,MAAR,EATQ;AAUlBL,iBAAa,EAAEI,MAAMC,MAAR,EAAgBH,UAAU,CAAC,IAAD,EAAO,qBAAP,CAA1B,EAVK;AAWlBD,gBAAY,EAAEG,MAAMlB,QAAR,EAAkBuB,KAAK,OAAvB;AAXM,CAAf;;AAcP,MAAMC,UAAU5B,SAAS6B,kBAAT,CAA4BC,OAA5C;AACA,MAAMC,UAAU/B,SAASgC,OAAzB;;AAEA,MAAMC,YAAY,IAAI9B,MAAJ,CAAWkB,MAAX,EAAmBU,OAAnB,CAAlB;AACAE,UAAUC,KAAV,CAAgB,EAAEtB,MAAM,CAAR,EAAhB,EAA6B,EAAEa,QAAQ,IAAV,EAA7B;AACAQ,UAAUE,GAAV,CAAc,YAAd,EAA4B,SAA5B;AACAF,UAAUG,MAAV,CAAiBrC,YAAjB;;AAEA,MAAMsC,UAAUvC,SAASwC,KAAT,CAAe,SAAf,EAA0BL,SAA1B,CAAhB;;AAEA,IAAIL,OAAJ,EAAa;AAAES,YAAQE,UAAR,CAAmBtC,KAAnB;AAA4B;;AAE3C,eAAeoC,OAAf","file":"model.js","sourcesContent":["/**\n * @author 4Decoder\n * @property {Number} id Setting primaryKey\n * @property {String} name Setting varaible name\n * @property {String} access Setting \"public\", \"private\"\n * @property {String} category Setting category of domains affected\n * @property {String} value Setting value value\n * @property {String} description Setting description\n * @description Setting holds record of all cities with terminals\n */\nimport Joi from \"joi\";\nimport mongoose from \"mongoose\";\n// eslint-disable-next-line camelcase\nimport mongoose_csv from \"mongoose-csv\";\nimport { DATABASE } from \"../../../constants\";\nimport table from \"./table\";\nimport Staff from \"../staff/model\";\n\nconst { Schema } = mongoose;\nconst { ObjectId } = Schema.Types;\n\nexport const schemaFetch = {\n    names: Joi.string().optional(),\n    fields: Joi.string().optional(),\n};\n\nexport const schemaUpdate = {\n    name: Joi.string().trim().optional(),\n    access: Joi.string().trim().valid(\"public\", \"private\").optional(),\n    value: Joi.string().trim().optional(),\n    category: Joi.string().optional(),\n    description: Joi.string().optional(),\n    updated_by: Joi.string().required(),\n};\n\nexport const schema = {\n    name: {\n        type: String,\n        uppercase: true,\n        unique: true,\n        required: [true, \"Why no name?\"],\n    },\n    access: { type: String, enum: [\"public\", \"private\"], required: [true, \"Why no access?\"] },\n    value: { type: String, required: [true, \"Why no value?\"] },\n    category: { type: String },\n    description: { type: String, required: [true, \"Why no description?\"] },\n    updated_by: { type: ObjectId, ref: \"Staff\" },\n};\n\nconst preload = DATABASE.PRELOAD_TABLE_DATA.DEFAULT;\nconst options = DATABASE.OPTIONS;\n\nconst newSchema = new Schema(schema, options);\nnewSchema.index({ name: 1 }, { unique: true });\nnewSchema.set(\"collection\", \"setting\");\nnewSchema.plugin(mongoose_csv);\n\nconst Setting = mongoose.model(\"Setting\", newSchema);\n\nif (preload) { Setting.insertMany(table); }\n\nexport default Setting;\n"]}