{"version":3,"sources":["../../../../src/api/general/setting/model.js"],"names":["Schema","mongoose","ObjectId","Types","schemaFetch","names","Joi","string","optional","fields","schemaUpdate","name","trim","access","valid","value","category","description","updated_by","required","schema","type","String","uppercase","unique","enum","ref","preload","DATABASE","PRELOAD_TABLE_DATA","DEFAULT","options","OPTIONS","newSchema","index","set","plugin","mongoose_csv","Setting","model","insertMany","table"],"mappings":";;;;;;;AAUA;;;;AACA;;;;AAEA;;;;AACA;;AACA;;;;AACA;;;;;;AAJA;AAZA;;;;;;;;;;IAkBQA,M,GAAWC,kB,CAAXD,M;IACAE,Q,GAAaF,OAAOG,K,CAApBD,Q;AAED,IAAME,oCAAc;AACvBC,WAAOC,cAAIC,MAAJ,GAAaC,QAAb,EADgB;AAEvBC,YAAQH,cAAIC,MAAJ,GAAaC,QAAb;AAFe,CAApB;;AAKA,IAAME,sCAAe;AACxBC,UAAML,cAAIC,MAAJ,GAAaK,IAAb,GAAoBJ,QAApB,EADkB;AAExBK,YAAQP,cAAIC,MAAJ,GAAaK,IAAb,GAAoBE,KAApB,CAA0B,QAA1B,EAAoC,SAApC,EAA+CN,QAA/C,EAFgB;AAGxBO,WAAOT,cAAIC,MAAJ,GAAaK,IAAb,GAAoBJ,QAApB,EAHiB;AAIxBQ,cAAUV,cAAIC,MAAJ,GAAaC,QAAb,EAJc;AAKxBS,iBAAaX,cAAIC,MAAJ,GAAaC,QAAb,EALW;AAMxBU,gBAAYZ,cAAIC,MAAJ,GAAaY,QAAb;AANY,CAArB;;AASA,IAAMC,0BAAS;AAClBT,UAAM;AACFU,cAAMC,MADJ;AAEFC,mBAAW,IAFT;AAGFC,gBAAQ,IAHN;AAIFL,kBAAU,CAAC,IAAD,EAAO,cAAP;AAJR,KADY;AAOlBN,YAAQ,EAAEQ,MAAMC,MAAR,EAAgBG,MAAM,CAAC,QAAD,EAAW,SAAX,CAAtB,EAA6CN,UAAU,CAAC,IAAD,EAAO,gBAAP,CAAvD,EAPU;AAQlBJ,WAAO,EAAEM,MAAMC,MAAR,EAAgBH,UAAU,CAAC,IAAD,EAAO,eAAP,CAA1B,EARW;AASlBH,cAAU,EAAEK,MAAMC,MAAR,EATQ;AAUlBL,iBAAa,EAAEI,MAAMC,MAAR,EAAgBH,UAAU,CAAC,IAAD,EAAO,qBAAP,CAA1B,EAVK;AAWlBD,gBAAY,EAAEG,MAAMnB,QAAR,EAAkBwB,KAAK,OAAvB;AAXM,CAAf;;AAcP,IAAMC,UAAUC,oBAASC,kBAAT,CAA4BC,OAA5C;AACA,IAAMC,UAAUH,oBAASI,OAAzB;;AAEA,IAAMC,YAAY,IAAIjC,MAAJ,CAAWoB,MAAX,EAAmBW,OAAnB,CAAlB;AACAE,UAAUC,KAAV,CAAgB,EAAEvB,MAAM,CAAR,EAAhB,EAA6B,EAAEa,QAAQ,IAAV,EAA7B;AACAS,UAAUE,GAAV,CAAc,YAAd,EAA4B,SAA5B;AACAF,UAAUG,MAAV,CAAiBC,qBAAjB;;AAEA,IAAMC,UAAUrC,mBAASsC,KAAT,CAAe,SAAf,EAA0BN,SAA1B,CAAhB;;AAEA,IAAIN,OAAJ,EAAa;AAAEW,YAAQE,UAAR,CAAmBC,eAAnB;AAA4B;;kBAE5BH,O","file":"model.js","sourcesContent":["/**\r\n * @author 4Decoder\r\n * @property {Number} id Setting primaryKey\r\n * @property {String} name Setting varaible name\r\n * @property {String} access Setting \"public\", \"private\"\r\n * @property {String} category Setting category of domains affected\r\n * @property {String} value Setting value value\r\n * @property {String} description Setting description\r\n * @description Setting holds record of all cities with terminals\r\n */\r\nimport Joi from \"joi\";\r\nimport mongoose from \"mongoose\";\r\n// eslint-disable-next-line camelcase\r\nimport mongoose_csv from \"mongoose-csv\";\r\nimport { DATABASE } from \"../../../constants\";\r\nimport table from \"./table\";\r\nimport Staff from \"../staff/model\";\r\n\r\nconst { Schema } = mongoose;\r\nconst { ObjectId } = Schema.Types;\r\n\r\nexport const schemaFetch = {\r\n    names: Joi.string().optional(),\r\n    fields: Joi.string().optional(),\r\n};\r\n\r\nexport const schemaUpdate = {\r\n    name: Joi.string().trim().optional(),\r\n    access: Joi.string().trim().valid(\"public\", \"private\").optional(),\r\n    value: Joi.string().trim().optional(),\r\n    category: Joi.string().optional(),\r\n    description: Joi.string().optional(),\r\n    updated_by: Joi.string().required(),\r\n};\r\n\r\nexport const schema = {\r\n    name: {\r\n        type: String,\r\n        uppercase: true,\r\n        unique: true,\r\n        required: [true, \"Why no name?\"],\r\n    },\r\n    access: { type: String, enum: [\"public\", \"private\"], required: [true, \"Why no access?\"] },\r\n    value: { type: String, required: [true, \"Why no value?\"] },\r\n    category: { type: String },\r\n    description: { type: String, required: [true, \"Why no description?\"] },\r\n    updated_by: { type: ObjectId, ref: \"Staff\" },\r\n};\r\n\r\nconst preload = DATABASE.PRELOAD_TABLE_DATA.DEFAULT;\r\nconst options = DATABASE.OPTIONS;\r\n\r\nconst newSchema = new Schema(schema, options);\r\nnewSchema.index({ name: 1 }, { unique: true });\r\nnewSchema.set(\"collection\", \"setting\");\r\nnewSchema.plugin(mongoose_csv);\r\n\r\nconst Setting = mongoose.model(\"Setting\", newSchema);\r\n\r\nif (preload) { Setting.insertMany(table); }\r\n\r\nexport default Setting;\r\n"]}