{"version":3,"sources":["../../../../src/api/general/timetable/model.js"],"names":["Schema","mongoose","ObjectId","Types","schemaCreate","type","Joi","string","trim","valid","optional","activity","day","required","from","to","duration","number","classe","course","classroom","subsidiary","Object","values","SUBSIDIARY","description","created_by","schemaUpdate","updated_by","schema","String","enum","default","Date","Number","ref","deleted","Boolean","deleted_at","options","DATABASE","OPTIONS","newSchema","set","Timetable","model"],"mappings":"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","file":"model.js","sourcesContent":["/**\n * @author 4Dcoder\n * @property {ObjectId} id Timetable primaryKey\n * @property {String} type Timetable type \"REGULAR|ASSESSMENT\"\n * @property {String} activity Timetable activity\n *  \"LESSON\", \"BREAK\", \"CLOSED\", \"PREP\", \"FREE\", \"LIBRARY\"\n* @property {String} day Timetable day\n * @property {String} from Timetable from\n * @property {String} to Timetable to\n * @property {Number} duration Timetable duration in Minutes\n * @property {ObjectId} classe Timetable classe\n * @property {ObjectId} course Timetable course\n * @property {ObjectId} classroom Timetable classroom\n * @property {String} subsidiary Timetable subsidiary\n * @property {String} description Timetable description\n * @description Timetable model holds record of all subject staffs timetable and durations\n */\nimport Joi from \"joi\";\nimport mongoose from \"mongoose\";\n// eslint-disable-next-line camelcase\nimport mongoose_csv from \"mongoose-csv\";\nimport { DATABASE, SUBSIDIARY } from \"../../../constants\";\n// eslint-disable-next-line import/no-cycle\nimport Staff from \"../staff/model\";\nimport Classe from \"../classe/model\";\nimport Classroom from \"../classroom/model\";\nimport { Course } from \"../subject/model\";\n\nconst { Schema } = mongoose;\nconst { ObjectId } = Schema.Types;\n\nexport const schemaCreate = {\n    type: Joi.string().trim().valid([\"REGULAR\", \"ASSESSMENT\"]).optional(),\n    activity: Joi.string().trim().valid([\"LESSON\", \"BREAK\", \"CLOSED\", \"PREP\", \"FREE\", \"LIBRARY\"]).optional(),\n    day: Joi.string().required(),\n    from: Joi.string().required(),\n    to: Joi.string().required(),\n    duration: Joi.number().required(),\n    classe: Joi.string().required(),\n    course: Joi.string().required(),\n    classroom: Joi.string().required(),\n    subsidiary: Joi.string().valid(Object.values(SUBSIDIARY)).required(),\n    description: Joi.string().optional(),\n    created_by: Joi.string().required(),\n};\n\nexport const schemaUpdate = {\n    type: Joi.string().trim().valid([\"REGULAR\", \"ASSESSMENT\"]).optional(),\n    activity: Joi.string().trim().valid([\"LESSON\", \"BREAK\", \"CLOSED\", \"PREP\", \"FREE\", \"LIBRARY\"]).optional(),\n    day: Joi.string().optional(),\n    from: Joi.string().optional(),\n    to: Joi.string().optional(),\n    duration: Joi.number().optional(),\n    classe: Joi.string().optional(),\n    course: Joi.string().optional(),\n    classroom: Joi.string().optional(),\n    subsidiary: Joi.string().valid(Object.values(SUBSIDIARY)).optional(),\n    description: Joi.string().optional(),\n    updated_by: Joi.string().required(),\n};\n\nexport const schema = {\n    type: { type: String, enum: [\"REGULAR\", \"ASSESSMENT\"], default: \"REGULAR\" },\n    activity: {\n        type: String,\n        enum: [\"LESSON\", \"BREAK\", \"CLOSED\", \"PREP\", \"FREE\", \"LIBRARY\"],\n        default: \"LESSON\",\n    },\n    day: { type: String, required: true },\n    from: { type: Date },\n    to: { type: Date },\n    duration: { type: Number },\n    classe: { type: ObjectId, ref: \"Classe\", required: true },\n    course: { type: ObjectId, ref: \"Course\", required: true },\n    classroom: { type: ObjectId, ref: \"Classroom\", required: true },\n    subsidiary: {\n        type: String,\n        enum: Object.values(SUBSIDIARY),\n        required: true,\n    },\n    description: { type: String },\n    deleted: { type: Boolean, default: false, required: true },\n    deleted_at: { type: Date },\n    created_by: { type: ObjectId, ref: \"Staff\", required: true },\n    updated_by: { type: ObjectId, ref: \"Staff\" },\n};\n\nconst options = DATABASE.OPTIONS;\n\nconst newSchema = new Schema(schema, options);\nnewSchema.set(\"collection\", \"timetable\");\n\nconst Timetable = mongoose.model(\"timetable\", newSchema);\n\nexport default Timetable;\n"]}