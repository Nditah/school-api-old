{"version":3,"sources":["../../../../src/api/general/student/model.js"],"names":["Joi","mongoose","mongoose_csv","DATABASE","GENDER","CUSTOMER_TYPE","table","Staff","State","County","Rating","BlogComment","Schema","ObjectId","Types","schemaLogin","email","string","trim","optional","phone","otp","password","type","valid","schemaCreate","customer_type","title","surname","required","other_name","gender","birth_date","date","phone_personal","skype","linkedin","facebook","instagram","twitter","youtube","contact_person","contact_person_phone","product","photo","address","state_id","county_id","country_iso2","max","is_pmt_client","boolean","is_pesl_client","is_pet_client","is_shop_client","is_engr_client","is_tenant","is_phone_verified","is_email_verified","remark","points","number","cart_id","blog_comment_ids","array","created_by","schemaUpdate","otp_count","company","industry","website","wallet","sales_rep_id","sales_order_ids","pml_shipment_ids","pmt_boarding_ids","ratings","rating","updated_by","schema","String","enum","Object","values","default","INDIVIDUAL","minlength","Date","unique","alias","lowercase","match","Number","otp_access","Boolean","ref","referral","comment","preload","PRELOAD_TABLE_DATA","DEFAULT","options","OPTIONS","newSchema","index","weights","set","plugin","Customer","model","createIndexes","findOne","then","user","console","log","newRecord","save","catch","err","__dirname","message","insertMany"],"mappings":"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","file":"model.js","sourcesContent":["/* eslint-disable import/no-cycle */\n/**\n * @author 4Dcoder\n * @property {ObjectId} id Customer primaryKey\n * @property {String} customer type \"INDIVIDUAL\", \"ORGANIZATION\"\n * @property {String} title Customer name title \"Dr, Barr. Rev Chief\"\n * @property {String} surname Customer surname (required)\n * @property {String} other_name Customer other name (required)\n * @property {String} gender Customer gender (required)\n * @property {Date} birth_date Customer date of birth\n * @property {String} phone Customer official phone number (required)\n * @property {String} phone_personal Customer home phone number\n * @property {String} email Customer email address\n * @property {String} password Customer password for accessing the App\n * @property {String} otp Customer one-time-password for accessing the App\n * @property {Number} otp_count Number of times OTP has been used without successful transaction\n * @property {String} company Customer company or organization\n * @property {String} industry Customer industry type e.g EDU, FIN, IT, AGRO etc\n * @property {String} website Customer website\n * @property {String} website Customer website\n * @property {String} skype Customer Skype.com contact\n * @property {String} linkedin Customer LinkedIn.com contact url\n * @property {String} facebook Customer Facebook.com contact url\n * @property {String} instagram Customer Instagram.com contact url\n * @property {String} twitter Customer Twitter.com contact url\n * @property {String} youtube Customer Youtube.com contact url\n * @property {String} contact_person Customer next-of-kin, or contact person\n * @property {String} contact_person_phone Customer next-of-kin, or contact person phone\n * @property {String} product Customer product, service or project of interest\n * @property {String} photo Customer photo url\n * @property {String} address Customer residential or work address\n * @property {String} country_iso2 Customer country of residence (required)\n * @property {Boolean} is_pmt_client assert that client is also a PMT customer\n * @property {Boolean} is_pesl_client assert that client is also a PESL customer\n * @property {Boolean} is_pet_client assert that client is also a PET customer\n * @property {Boolean} is_shop_client assert that client is also a SHOP customer\n * @property {Boolean} is_engr_client Customer assert that client is also a ENGR customer\n * @property {Boolean} is_tenant assert if customer is a depot tenant\n * @property {Boolean} is_phone_verified phone verification status\n * @property {Boolean} is_email_verified email verification status\n * @property {Number} points Customer cummulative royalty points for patronage\n * @property {Number} wallet Customer wallet available ballance amount in Naira\n * @property {ObjectId} cart_id Customer current cart\n * @property {ObjectId} sales_rep_id Customer Staff SalesRep ObjectId\n * @property {Array} blog_comment_ids Customer array of BlogComment records\n * @property {Array} sales_order_ids: Customer array of SalesOrder records\n * @property {Array} pml_shipment_ids Customer array of PmlShipment records\n * @property {Array} pmt_boarding_ids Customer array of PmtBoarding records\n * @property {Array} ratings Customer array of Rating by customer\n * @property {Number} rating Customer client as rated by staff\n * @property {String} remark comment about customer by Staff\n * @property {ObjectId} created_by (required) id of the staff who created the record\n * @property {ObjectId} updated_by id of the staff who created the record\n * @description Records of all company customers.\n */\n\nimport Joi from \"joi\";\nimport mongoose from \"mongoose\";\n// eslint-disable-next-line camelcase\nimport mongoose_csv from \"mongoose-csv\";\nimport { DATABASE, GENDER, CUSTOMER_TYPE } from \"../../../constants\";\nimport table from \"./table\";\nimport Staff from \"../staff/model\";\nimport State from \"../state/model\";\nimport County from \"../county/model\";\nimport Rating from \"../rating/model\";\nimport BlogComment from \"../blog-comment/model\";\n\nconst { Schema } = mongoose;\nconst { ObjectId } = Schema.Types;\n\nexport const schemaLogin = {\n    email: Joi.string().trim().email().optional(),\n    phone: Joi.string().optional(),\n    otp: Joi.string().optional(),\n    password: Joi.string().optional(),\n    type: Joi.string().valid([\"EMAIL\", \"PHONE\", \"OTP\"]).optional(),\n};\n\nexport const schemaCreate = {\n    customer_type: Joi.string().trim().optional(),\n    title: Joi.string().optional(),\n    surname: Joi.string().required(),\n    other_name: Joi.string().required(),\n    gender: Joi.string().required(),\n    birth_date: Joi.date().optional(),\n    phone: Joi.string().required(),\n    phone_personal: Joi.string().optional(),\n    email: Joi.string().trim().email().optional(),\n    password: Joi.string().optional(),\n    otp: Joi.string().optional(),\n    skype: Joi.string().optional(),\n    linkedin: Joi.string().optional(),\n    facebook: Joi.string().optional(),\n    instagram: Joi.string().optional(),\n    twitter: Joi.string().optional(),\n    youtube: Joi.string().optional(),\n    contact_person: Joi.string().optional(),\n    contact_person_phone: Joi.string().optional(),\n    product: Joi.string().optional(),\n    photo: Joi.string().optional(),\n    address: Joi.string().optional(),\n    state_id: Joi.string().optional(),\n    county_id: Joi.string().optional(),\n    country_iso2: Joi.string().trim().max(2).optional(),\n    is_pmt_client: Joi.boolean().optional(),\n    is_pesl_client: Joi.boolean().optional(),\n    is_pet_client: Joi.boolean().optional(),\n    is_shop_client: Joi.boolean().optional(),\n    is_engr_client: Joi.boolean().optional(),\n    is_tenant: Joi.boolean().optional(),\n    is_phone_verified: Joi.boolean().optional(),\n    is_email_verified: Joi.boolean().optional(),\n    remark: Joi.string().optional(),\n    points: Joi.number().optional(),\n    cart_id: Joi.string().optional(),\n    blog_comment_ids: Joi.array().optional(),\n    created_by: Joi.string().optional(),\n};\n\nexport const schemaUpdate = {\n    customer_type: Joi.string().trim().optional(),\n    title: Joi.string().optional(),\n    surname: Joi.string().optional(),\n    other_name: Joi.string().optional(),\n    gender: Joi.string().optional(),\n    birth_date: Joi.date().optional(),\n    phone: Joi.string().optional(),\n    phone_personal: Joi.string().optional(),\n    email: Joi.string().trim().email().optional(),\n    password: Joi.string().optional(),\n    otp: Joi.string().optional(),\n    otp_count: Joi.number().optional(),\n    company: Joi.string().optional(),\n    industry: Joi.string().optional(),\n    website: Joi.string().optional(),\n    skype: Joi.string().optional(),\n    linkedin: Joi.string().optional(),\n    facebook: Joi.string().optional(),\n    instagram: Joi.string().optional(),\n    twitter: Joi.string().optional(),\n    youtube: Joi.string().optional(),\n    contact_person: Joi.string().optional(),\n    contact_person_phone: Joi.string().optional(),\n    product: Joi.string().optional(),\n    photo: Joi.string().optional(),\n    address: Joi.string().optional(),\n    state_id: Joi.string().optional(),\n    county_id: Joi.string().optional(),\n    country_iso2: Joi.string().trim().max(2).optional(),\n    is_pmt_client: Joi.boolean().optional(),\n    is_pesl_client: Joi.boolean().optional(),\n    is_pet_client: Joi.boolean().optional(),\n    is_shop_client: Joi.boolean().optional(),\n    is_engr_client: Joi.boolean().optional(),\n    is_tenant: Joi.boolean().optional(),\n    is_phone_verified: Joi.boolean().optional(),\n    is_email_verified: Joi.boolean().optional(),\n    remark: Joi.string().optional(),\n    points: Joi.number().optional(),\n    wallet: Joi.number().optional(),\n    cart_id: Joi.string().optional(),\n    blog_comment_ids: Joi.array().optional(),\n    sales_rep_id: Joi.string().optional(),\n    sales_order_ids: Joi.array().optional(),\n    pml_shipment_ids: Joi.array().optional(),\n    pmt_boarding_ids: Joi.array().optional(),\n    ratings: Joi.array().optional(),\n    rating: Joi.number().optional(),\n    updated_by: Joi.string().required(),\n};\n\nexport const schema = {\n    customer_type: {\n        type: String,\n        enum: Object.values(CUSTOMER_TYPE),\n        default: CUSTOMER_TYPE.INDIVIDUAL,\n        required: [true, \"Why no customer_type?\"],\n    },\n    title: { type: String },\n    surname: {\n        type: String,\n        minlength: 3,\n        trim: true,\n        required: [true, \"Why no surname?\"],\n    },\n    other_name: {\n        type: String,\n        minlength: 3,\n        trim: true,\n        required: [true, \"Why no other_name?\"],\n    },\n    gender: {\n        type: String,\n        enum: Object.values(GENDER),\n        required: [true, \"Why no gender?\"],\n    },\n    birth_date: { type: Date },\n    phone: {\n        type: String,\n        minlength: 11,\n        trim: true,\n        required: [true, \"Why no phone?\"],\n        unique: true,\n        alias: \"phone_office\",\n    },\n    phone_personal: {\n        type: String,\n        minlength: 11,\n        trim: true,\n        alias: \"phone_home\",\n    },\n    email: {\n        type: String,\n        minlength: 12,\n        trim: true,\n        lowercase: true,\n        unique: true,\n        // eslint-disable-next-line no-useless-escape\n        match: [/^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/,\n            \"Please fill a valid email address\"],\n    },\n    password: { type: String },\n    company: { type: String },\n    industry: { type: String },\n    skype: { type: String },\n    linkedin: { type: String },\n    facebook: { type: String },\n    instagram: { type: String },\n    twitter: { type: String },\n    youtube: { type: String },\n    website: { type: String },\n    otp: { type: String },\n    otp_count: { type: Number, required: [true, \"Why no input?\"], default: 0 },\n    otp_access: { type: Boolean, default: false },\n    contact_person: { type: String, required: [true, \"Why no contact_person?\"] },\n    contact_person_phone: { type: String, required: [true, \"Why no contact_person phone?\"] },\n    product: { type: String, alias: \"project\" },\n    photo: { type: String },\n    address: { type: String },\n    state_id: { type: ObjectId, ref: \"State\" },\n    county_id: { type: ObjectId, ref: \"County\" },\n    country_iso2: { type: String, required: [true, \"Why no country_iso2?\"], default: \"NG\" },\n    is_pmt_client: { type: Boolean, default: false },\n    is_pesl_client: { type: Boolean, default: false },\n    is_pet_client: { type: Boolean, default: false },\n    is_shop_client: { type: Boolean, default: false },\n    is_engr_client: { type: Boolean, default: false },\n    is_tenant: { type: Boolean, default: false },\n    is_phone_verified: { type: Boolean, default: false },\n    is_email_verified: { type: Boolean, default: false },\n    remark: { type: String },\n    referral: { type: String, comment: \"lead referral source\" },\n    points: { type: Number, default: 2 }, // Royalty Points for patronage\n    wallet: { type: Number }, // Customer ballance in Naira\n    cart_id: { type: ObjectId, ref: \"Cart\" },\n    sales_rep_id: { type: ObjectId, ref: \"Staff\" },\n    sales_order_ids: [{ type: ObjectId, ref: \"SalesOrder\" }],\n    blog_comment_ids: [{ type: ObjectId, ref: \"BlogComment\" }],\n    ratings: { type: ObjectId, ref: \"Rating\" }, // Services rated by Customer\n    rating: { type: Number }, // Client as rated by Staff\n    created_by: { type: ObjectId },\n    updated_by: { type: ObjectId },\n};\n\nconst preload = DATABASE.PRELOAD_TABLE_DATA.DEFAULT;\nconst options = DATABASE.OPTIONS;\n\nconst newSchema = new Schema(schema, options);\n\nnewSchema.index({\n    phone: \"text\",\n    phone_personal: \"text\",\n    email: \"text\",\n    surname: \"text\",\n    other_name: \"text\",\n},\n{\n    weights: {\n        phone: 5,\n        phone_personal: 5,\n        email: 4,\n        surname: 3,\n        other_name: 1,\n    },\n});\n\nnewSchema.set(\"collection\", \"customer\");\nnewSchema.plugin(mongoose_csv);\n\nconst Customer = mongoose.model(\"Customer\", newSchema);\nCustomer.createIndexes();\nCustomer.findOne({ email: \"customer@peacegroup.ng\" })\n    .then((user) => {\n        if (!user) {\n            console.log(table[ 0 ]);\n            const newRecord = new Customer(table[ 0 ]);\n            newRecord.save();\n            delete table[ 0 ];\n        }\n    })\n    .catch(err => console.log(__dirname, err.message));\n\nif (preload) { Customer.insertMany(table); }\n\nexport default Customer;\n"]}