{"version":3,"sources":["../../../../src/api/flutterwave/flutterwave-transaction/routes.js"],"names":["router","express","Router","get","checkAuth","isValidStaff","fetchRecord","queryOnlineTnx","fetchSettlement","post","createRecord","verifyBvn","verifyOnlineTnx"],"mappings":";;;;;;AAKA;;;;AACA;;AACA;;;;AAEA,IAAMA,SAASC,kBAAQC,MAAR,EAAf;;AAEA;;;;;;;;;;;;;;;AAXA;;;;;AA0BAF,OAAOG,GAAP,CAAW,2BAAX,EAAwC,CAACC,wBAAD,EAAYC,2BAAZ,CAAxC,EAAmEC,uBAAnE;;AAEA;;;;;;;;;;;;;;;;;;AAkBAN,OAAOG,GAAP,CAAW,kCAAX,EAA+C,CAACC,wBAAD,EAAYC,2BAAZ,CAA/C,EAA0EE,0BAA1E;;AAEA;;;;;;;;;;;;;AAaAP,OAAOG,GAAP,CAAW,sCAAX,EAAmD,CAACC,wBAAD,EAAYC,2BAAZ,CAAnD,EAA8EG,2BAA9E;;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsCAR,OAAOS,IAAP,CAAY,2BAAZ,EAAyCC,wBAAzC;;AAEA;;;;;;;;;AASAV,OAAOG,GAAP,CAAW,oCAAX,EAAiDQ,qBAAjD;;AAEA;;;;;;;;;;AAUAX,OAAOG,GAAP,CAAW,0CAAX,EAAuDS,2BAAvD;;kBAEeZ,M","file":"routes.js","sourcesContent":["/**\r\n * @author 4Decoder\r\n * @description FlutterwaveTransaction holds record of all transactions via\r\n * Flutterwave payment gateway\r\n */\r\nimport express from \"express\";\r\nimport { checkAuth, isValidStaff } from \"../../../middleware/authorization\";\r\nimport { fetchRecord, createRecord, verifyBvn, queryOnlineTnx, fetchSettlement, verifyOnlineTnx } from \"./controller\";\r\n\r\nconst router = express.Router();\r\n\r\n/**\r\n * @api {get} /api/v1/flutterwave-transactions?id={recordId} Retrieve one or all records\r\n * @apiName RetrieveFlutterwaveTransaction\r\n * @apiGroup FlutterwaveTransaction\r\n  * @apiExample {curl} Example usage for retieving a single record:\r\n *      curl -i api/flutterwave-transactions?\r\n * @apiParam {Object} filter query condition (optional)\r\n * @apiParam {Number} skip Number of records to offset by (optional)\r\n * @apiParam {Number} limit Maximum Number of records to retrieve (optional)\r\n * @apiParam {String} sort how records would be arranged in alphabet (optional)\r\n * @apiParam {String} projection list of record's attributes to retrieve (optional)\r\n * @apiDescription Records  of account headings belonging to one classification\r\n * @apiSuccess {Object[]} Array of Objects of records.\r\n * @apiError {Object} 400 Some parameters may contain invalid values.\r\n */\r\nrouter.get(\"/flutterwave-transactions\", [checkAuth, isValidStaff], fetchRecord);\r\n\r\n/**\r\n * @api {get} /api/v1/flutterwave-transactions/online?id={recordId} Retrieve one or all online Tnx\r\n * @apiName RetrieveFlutterwaveTransactionOnline\r\n * @apiGroup FlutterwaveTransaction\r\n * @apiExample {curl} Example usage for retieving multiple records:\r\n *      curl -i https://ravesandboxapi.flutterwave.com/v2/gpx/transactions/query?\r\n * @apiParam {Number} id transaction ID from from the Verify transaction response (optional)\r\n * @apiParam {Number} offset Number of records to skip (optional)\r\n * @apiParam {Number} limit Maximum Number of records to retrieve (optional)\r\n * @apiParam {Date} from transactions Start-date to list records (optional)\r\n * @apiParam {Date} to transactions End-date to list records (optional)\r\n * @apiParam {String} currency transactions currency to query records e.g. \"NGN\"\r\n * @apiParam {String} status transactions status to query records e.g. \"successful\"\r\n * @apiDescription Records of online transactions or retrieve the timeline events\r\n * detail of a transaction\r\n * @apiSuccess {Object[]} Array of Objects of records.\r\n * @apiError {Object} 400 Some parameters may contain invalid values.\r\n */\r\nrouter.get(\"/flutterwave-transactions/online\", [checkAuth, isValidStaff], queryOnlineTnx);\r\n\r\n/**\r\n * @api {get} /api/v1/flutterwave-transactions/settlement?id={recordId} Retrieve one or all records\r\n * @apiName RetrieveFlutterwaveTransactionSettlement\r\n * @apiGroup FlutterwaveTransaction\r\n * @apiExample {curl} Example usage for retieving multiple records:\r\n *      curl -i https://mis-api.herokuapp.com/api/v1/flutterwave-transactions?page=1&limit=50&status=completed\r\n * @apiParam {Number} page to retrieve (optional)\r\n * @apiParam {Number} limit Maximum Number of records to retrieve (optional)\r\n * @apiParam {String} status Transaction status to retrieve e.g. \"completed\"\r\n * @apiDescription Records of Settlement accounts\r\n * @apiSuccess {Object[]} Array of Objects of records.\r\n * @apiError {Object} 400 Some parameters may contain invalid values.\r\n */\r\nrouter.get(\"/flutterwave-transactions/settlement\", [checkAuth, isValidStaff], fetchSettlement);\r\n\r\n/**\r\n * @api {post} /api/v1/flutterwave-transactions Create flutterwave-transactions\r\n * @apiName CreateFlutterwaveTransaction\r\n * @apiGroup FlutterwaveTransaction\r\n * @apiParam {Number} flwId FlutterwaveTransaction flwId // 125837,\r\n * @apiParam {String} txRef FlutterwaveTransaction txRef // \"rave-pos-272519815315\",\r\n * @apiParam {String} flwRef FlutterwaveTransaction flwRef // \"FLWACHMOCK-1523118279396\",\r\n * @apiParam {String} orderRef FlutterwaveTransaction orderRef // \"URF_1523118277202_7343035\",\r\n * @apiParam {String} paymentPlan FlutterwaveTransaction paymentPlan // null,\r\n * @apiParam {Date} createdAt FlutterwaveTransaction createdAt // \"2018-04-07T16:24:37.000Z\",\r\n * @apiParam {Number} amount FlutterwaveTransaction amount // 200,\r\n * @apiParam {Number} charged_amount FlutterwaveTransaction charged_amount // 200,\r\n * @apiParam {String} status FlutterwaveTransaction status // \"successful\",\r\n * @apiParam {String} IP FlutterwaveTransaction IP // \"197.149.95.62\",\r\n * @apiParam {String} currency FlutterwaveTransaction currency // \"NGN\",\r\n * @apiParam {Object} customer FlutterwaveTransaction customer Object {\r\n *      {Number} id customer id // 5766,\r\n *      {String} phone customer phone , // \"N/A\",\r\n *      {String} fullName customer phone , // \"Anonymous customer\",\r\n *      {String} customertoken customer phone , // null,\r\n *      {String} email customer phone , // \"salesmode@ravepay.co\",\r\n *      {Date} createdAt customer phone , // \"2017-10-16T10:03:19.000Z\",\r\n *      {Date} updatedAt customer phone , // \"2017-10-16T10:03:19.000Z\",\r\n *      {Date} deletedAt customer phone , // null,\r\n *      {Number} AccountId customer phone , // 134,\r\n *      },\r\n * @apiParam {Object} entity FlutterwaveTransaction entity Object {\r\n *      {String} account_number entity , // \"0690000037\",\r\n *      {String} first_name entity , // \"Dele Moruf\",\r\n *      {String} last_name entity , // \"Quadri\",\r\n *      {String} card6 entity , // \"539983\",\r\n *      {String} card_last4 entity , // \"8381\",\r\n *      },\r\n * @apiSuccess {Object} FlutterwaveTransaction FlutterwaveTransaction's data.\r\n * @apiError {Object} 400 Some parameters may contain invalid values.\r\n * @apiError 404 FlutterwaveTransaction not found.\r\n * @apiError 401 master access only.\r\n */\r\nrouter.post(\"/flutterwave-transactions\", createRecord);\r\n\r\n/**\r\n * @api {get} /api/v1/flutterwave-transactions/bvn/:bvn verify BVN\r\n * @apiName VerifyBvn\r\n * @apiGroup FlutterwaveTransaction\r\n * @apiParam {String} bvn Bank Verification Number\r\n * @apiDescription This allows you verify the authenticity of a BVN\r\n * @apiSuccess {Object[]} Array of Objects of records.\r\n * @apiError {Object} 400 Some parameters may contain invalid values.\r\n */\r\nrouter.get(\"/flutterwave-transactions/bvn/:bvn\", verifyBvn);\r\n\r\n/**\r\n * @api {get} /api/v1/flutterwave-transactions/payment/{txref} verify Payment\r\n * @apiName VerifyPayment\r\n * @apiGroup FlutterwaveTransaction\r\n * @apiParam {String} txref Transaction Reference Number\r\n * @apiDescription This allows you verify the authenticity of a Transaction\r\n * in terms of status, amount and currency\r\n * @apiSuccess {Object[]} Array of Objects of records.\r\n * @apiError {Object} 400 Some parameters may contain invalid values.\r\n */\r\nrouter.get(\"/flutterwave-transactions/payment/:txref\", verifyOnlineTnx);\r\n\r\nexport default router;\r\n"]}