{"version":3,"sources":["../../../../src/api/flutterwave/flutterwave-transaction/model.js"],"names":["Schema","mongoose","ObjectId","Types","schemaCreate","flwId","Joi","number","optional","txRef","string","flwRef","orderRef","paymentPlan","flwCreatedAt","date","amount","charged_amount","status","IP","currency","customer","object","entity","created_by","schemaUpdate","updated_by","required","schema","type","Number","String","Date","id","phone","fullName","customertoken","email","createdAt","updatedAt","deletedAt","AccountId","account_number","first_name","last_name","card6","card_last4","ref","options","DATABASE","OPTIONS","newSchema","set","FlutterwaveTransaction","model"],"mappings":"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","file":"model.js","sourcesContent":["/**\r\n * @author 4Dcoder\r\n * @property {Number} flwId FlutterwaveTransaction flwId // 125837,\r\n * @property {String} txRef FlutterwaveTransaction txRef // \"rave-pos-272519815315\",\r\n * @property {String} flwRef FlutterwaveTransaction flwRef // \"FLWACHMOCK-1523118279396\",\r\n * @property {String} orderRef FlutterwaveTransaction orderRef // \"URF_1523118277202_7343035\",\r\n * @property {String} paymentPlan FlutterwaveTransaction paymentPlan // null,\r\n * @property {Date} flwCreatedAt FlutterwaveTransaction flwCreatedAt // \"2018-04-07T16:24:37.000Z\",\r\n * @property {Number} amount FlutterwaveTransaction amount // 200,\r\n * @property {Number} charged_amount FlutterwaveTransaction charged_amount // 200,\r\n * @property {String} status FlutterwaveTransaction status // \"successful\",\r\n * @property {String} IP FlutterwaveTransaction IP // \"197.149.95.62\",\r\n * @property {String} currency FlutterwaveTransaction currency // \"NGN\",\r\n * @property {Object} customer FlutterwaveTransaction customer Object {\r\n *      {Number} id customer id // 5766,\r\n *      {String} phone customer phone , // \"N/A\",\r\n *      {String} fullName customer phone , // \"Anonymous customer\",\r\n *      {String} customertoken customer phone , // null,\r\n *      {String} email customer phone , // \"salesmode@ravepay.co\",\r\n *      {Date} createdAt customer phone , // \"2017-10-16T10:03:19.000Z\",\r\n *      {Date} updatedAt customer phone , // \"2017-10-16T10:03:19.000Z\",\r\n *      {Date} deletedAt customer phone , // null,\r\n *      {Number} AccountId customer phone , // 134,\r\n *      },\r\n * @property {Object} entity FlutterwaveTransaction entity Object {\r\n *      {String} account_number entity , // \"0690000037\",\r\n *      {String} first_name entity , // \"Dele Moruf\",\r\n *      {String} last_name entity , // \"Quadri\",\r\n *      {String} card6 entity , // \"539983\",\r\n *      {String} card_last4 entity , // \"8381\",\r\n *      },\r\n * @description FlutterwaveTransaction model holds record of all transactions through 3rd party\r\n * payment gateway like InterSwitch, Flutterwave, Paystack, Paypal. It mainly has the\r\n * webhook for flutterwave payment for now.\r\n */\r\nimport Joi from \"joi\";\r\nimport mongoose from \"mongoose\";\r\n// eslint-disable-next-line camelcase\r\nimport mongoose_csv from \"mongoose-csv\";\r\nimport { DATABASE } from \"../../../constants\";\r\nimport Staff from \"../../general/staff/model\";\r\n\r\nconst { Schema } = mongoose;\r\nconst { ObjectId } = Schema.Types;\r\n\r\nexport const schemaCreate = {\r\n    flwId: Joi.number().optional(),\r\n    txRef: Joi.string().optional(),\r\n    flwRef: Joi.string().optional(),\r\n    orderRef: Joi.string().optional(),\r\n    paymentPlan: Joi.string().optional(),\r\n    flwCreatedAt: Joi.date().optional(),\r\n    amount: Joi.number().optional(),\r\n    charged_amount: Joi.number().optional(),\r\n    status: Joi.string().optional(),\r\n    IP: Joi.string().optional(),\r\n    currency: Joi.string().optional(),\r\n    customer: Joi.object().optional(),\r\n    entity: Joi.object().optional(),\r\n    created_by: Joi.string().optional(),\r\n};\r\n\r\nexport const schemaUpdate = {\r\n    flwId: Joi.number().optional(),\r\n    txRef: Joi.string().optional(),\r\n    flwRef: Joi.string().optional(),\r\n    orderRef: Joi.string().optional(),\r\n    paymentPlan: Joi.string().optional(),\r\n    flwCreatedAt: Joi.date().optional(),\r\n    amount: Joi.number().optional(),\r\n    charged_amount: Joi.number().optional(),\r\n    status: Joi.string().optional(),\r\n    IP: Joi.string().optional(),\r\n    currency: Joi.string().optional(),\r\n    customer: Joi.object().optional(),\r\n    entity: Joi.object().optional(),\r\n    updated_by: Joi.string().required(),\r\n};\r\n\r\nexport const schema = {\r\n    flwId: { type: Number }, // 125837,\r\n    txRef: { type: String }, // \"rave-pos-272519815315\",\r\n    flwRef: { type: String }, // \"FLWACHMOCK-1523118279396\",\r\n    orderRef: { type: String }, // \"URF_1523118277202_7343035\",\r\n    paymentPlan: { type: String }, // null,\r\n    flwCreatedAt: { type: Date }, // \"2018-04-07T16:24:37.000Z\",\r\n    amount: { type: Number }, // 200,\r\n    charged_amount: { type: Number }, // 200,\r\n    status: { type: String }, // \"successful\",\r\n    IP: { type: String }, // \"197.149.95.62\",\r\n    currency: { type: String }, // \"NGN\",\r\n    customer: {\r\n        id: { type: Number }, // 5766,\r\n        phone: { type: String }, // \"N/A\",\r\n        fullName: { type: String }, // \"Anonymous customer\",\r\n        customertoken: { type: String }, // null,\r\n        email: { type: String }, // \"salesmode@ravepay.co\",\r\n        createdAt: { type: Date }, // \"2017-10-16T10:03:19.000Z\",\r\n        updatedAt: { type: Date }, // \"2017-10-16T10:03:19.000Z\",\r\n        deletedAt: { type: Date }, // null,\r\n        AccountId: { type: Number }, // 134,\r\n    },\r\n    entity: {\r\n        account_number: { type: String }, // \"0690000037\",\r\n        first_name: { type: String }, // \"Dele Moruf\",\r\n        last_name: { type: String }, // \"Quadri\",\r\n        card6: { type: String }, // \"539983\",\r\n        card_last4: { type: String }, // \"8381\",\r\n    },\r\n    created_by: { type: ObjectId },\r\n    updated_by: { type: ObjectId, ref: \"Staff\" },\r\n};\r\n\r\nconst options = DATABASE.OPTIONS;\r\n\r\nconst newSchema = new Schema(schema, options);\r\nnewSchema.set(\"collection\", \"flutterwave_transaction\");\r\n\r\nconst FlutterwaveTransaction = mongoose.model(\"FlutterwaveTransaction\", newSchema);\r\n\r\nexport default FlutterwaveTransaction;\r\n"]}